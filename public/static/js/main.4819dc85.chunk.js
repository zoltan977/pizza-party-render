(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{17:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(24),s=n.n(r),i=(n(47),n(48),n(10)),l=n(4),o=n.n(l),j=n(7),d=n(2),b=(n(50),n(9)),u=n(5),h="LOGIN_SUCCESS",O="LOGOUT",p="SET_DATA",x="SELECT_PIZZA",g="SELECT_TOPPING",m="SET_CART",v="CHECK_CART",f=n(6),z=n.n(f),y=function(e){e?z.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete z.a.defaults.headers.common.Authorization},k=n(40),N=function(){return{type:O}},C=function(e){var t=Object(k.a)(e).user;return{type:h,payload:{token:e,user:t}}};function S(e){var t=e.onChange,n=Object(c.useRef)(),r=a.a.Children.toArray(e.children);return Object(c.useEffect)((function(){if(n.current&&!n.current.innerText){for(var e=String.fromCharCode(160),t=0;t<2;t++)e+=e;n.current.innerText=e}}),[]),r=a.a.cloneElement(r[0],{contentEditable:!0,suppressContentEditableWarning:!0,ref:n,onKeyUp:function(){if(n.current){if(!n.current.innerText){for(var e=String.fromCharCode(160),c=0;c<2;c++)e+=e;n.current.innerText=e}t(n.current.innerText)}}})}var w=n(0),T=Object(u.b)((function(e){return{cart:e.cart,data:e.data.data,user:e.auth.user}}),{logout:N})((function(e){var t=e.logout,n=e.user,a=e.cart,r=e.data,s=Object(c.useState)("a"),i=Object(d.a)(s,2),l=i[0],u=i[1],h=Object(c.useState)("b"),O=Object(d.a)(h,2),p=O[0],x=O[1],g=Object(c.useState)("c"),m=Object(d.a)(g,2),v=m[0],f=m[1],y=Object(c.useState)("dropDownMenu"),k=Object(d.a)(y,2),N=k[0],C=k[1],T=function(){var e=Object(j.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.a.get("/api/get_auth_info");case 3:t=e.sent,n=t.data.authUrl,window.location.href=n,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Get auth url error: ",e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(j.a)(o.a.mark((function e(n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,z.a.post("/api/name_change",{newName:n},c);case 4:e.sent.data.success?console.log("name change happened: ",n):t(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("name change error: ",e.t0.response.data),t();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),A=Object(c.useRef)();return Object(w.jsxs)("div",{className:"NavBar",children:[Object(w.jsxs)("div",{className:N,children:[Object(w.jsx)(b.b,{to:"/",children:Object(w.jsx)("span",{children:"Home"})}),n?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(b.b,{to:"/order",children:Object(w.jsx)("span",{children:"\xdaj megrenel\xe9s"})}),Object(w.jsx)(b.b,{to:"/orders",children:Object(w.jsx)("span",{children:"Megrendel\xe9sek"})}),Object(w.jsx)(b.b,{to:"/booking",children:Object(w.jsx)("span",{children:"\xdaj asztalfoglal\xe1s"})}),Object(w.jsx)(b.b,{to:"/bookings",children:Object(w.jsx)("span",{children:"Asztalfoglal\xe1sok"})})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(b.b,{to:"/register",children:Object(w.jsx)("span",{children:"Regisztr\xe1ci\xf3"})}),Object(w.jsx)(b.b,{to:"/login",children:Object(w.jsx)("span",{children:"Bel\xe9p\xe9s"})})]})]}),Object(w.jsxs)("div",{className:"icons",children:[Object(w.jsx)("div",{className:"hamburger",onClick:function(e){"a"===l?(u("ax"),x("bx"),f("cx"),C("dropDownMenu show")):(u("a"),x("b"),f("c"),C("dropDownMenu"))},children:Object(w.jsxs)("svg",{viewBox:"0 0 40 40",children:[Object(w.jsx)("rect",{className:l,x:"0",y:"0",width:"20",height:"2"}),Object(w.jsx)("rect",{className:p,x:"0",y:"0",width:"20",height:"2"}),Object(w.jsx)("rect",{className:v,x:"0",y:"0",width:"20",height:"2"})]})}),Object(w.jsx)("div",{className:"cart",children:Object(w.jsxs)(b.b,{to:"/cart",children:[Object(w.jsx)("svg",{id:"cart",viewBox:"0 0 576 512",children:Object(w.jsx)("path",{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"})}),Object(w.jsx)("span",{children:function(){var e=0;for(var t in a){var n=function(n){e+=Number(a[t][n])*r[t].filter((function(e){return e._id.toString()===n.toString()})).map((function(e){return e.price}))};for(var c in a[t])n(c)}return e}()})]})})]}),Object(w.jsxs)("div",{className:"linksAndUser",children:[Object(w.jsxs)("div",{className:"links",children:[Object(w.jsxs)(b.c,{to:"/",exact:!0,children:["Home"," "]}),n?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("span",{className:"loggedIn",children:["Megrendel\xe9s",Object(w.jsxs)("div",{className:"order",children:[Object(w.jsx)(b.c,{to:"/order",children:"\xdaj megrendel\xe9s"}),Object(w.jsx)(b.c,{to:"/orders",children:"Megrendel\xe9sek "})]})]}),Object(w.jsxs)("span",{className:"loggedIn",children:["Asztalfoglal\xe1s",Object(w.jsxs)("div",{className:"booking",children:[Object(w.jsx)(b.c,{to:"/booking",children:"\xdaj asztalfoglal\xe1s"}),Object(w.jsx)(b.c,{to:"/bookings",children:"Asztalfoglal\xe1sok"})]})]})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(b.c,{to:"/register",children:"Regisztr\xe1ci\xf3"}),Object(w.jsx)(b.c,{to:"/login",children:"Bel\xe9p\xe9s"})]})]}),Object(w.jsxs)("div",{className:"userInfo",children:[n&&"no-image.png"!==n.photo&&Object(w.jsx)("img",{src:n.photo,alt:""}),n?Object(w.jsx)(S,{onChange:function(e){clearTimeout(A.current),A.current=setTimeout((function(){P(e)}),2e3)},children:Object(w.jsx)("span",{className:"userName",children:n.name})}):Object(w.jsxs)("span",{className:"notLoggedIn",onClick:T,children:["Bel\xe9p\xe9s",Object(w.jsx)("img",{src:"google.png",alt:""}),"-al!"]}),n&&Object(w.jsx)("div",{className:"logout",onClick:function(){return t()},children:Object(w.jsx)("svg",{viewBox:"0 0 512 512",children:Object(w.jsx)("path",{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"})})})]})]})]})})),P=n(20),A=(n(79),n(80),n(81),function(e,t){var n=document.getElementById("cart").getBoundingClientRect(),c=e.getBoundingClientRect(),a=e.cloneNode(!0);t.insertBefore(a,t.firstElementChild),a.style.position="fixed",a.style.zIndex=2,a.style.left=Math.floor(c.left)+"px",a.style.top=Math.floor(c.top)+"px",a.style.width=Math.floor(c.width)+"px",a.style.height=Math.floor(c.height)+"px",setTimeout((function(){a.style.left=Math.floor(n.left)+"px",a.style.top=Math.floor(n.top)+"px",a.style.width=Math.floor(n.width)+"px",a.style.height=Math.floor(n.height)+"px",a.style.transition="2s"}),100),setTimeout((function(){a.remove()}),2100)}),E=function(e,t,n,c){if(localStorage){var a=JSON.parse(localStorage.partyPizza);return e?a[n][t]=c:delete a[n][t],localStorage.partyPizza=JSON.stringify(a),{type:m,payload:a}}},I=function(e){return{type:x,payload:e}},F=function(e){return{type:g,payload:e}},M=Object(u.b)(null,{putInCart:function(e,t){if(localStorage){var n=JSON.parse(localStorage.partyPizza);return n[e.className][e.dataset.id]?n[e.className][e.dataset.id]=Number(n[e.className][e.dataset.id])+1:n[e.className][e.dataset.id]=1,localStorage.partyPizza=JSON.stringify(n),A(e,t),{type:m,payload:n}}},selectPizza:I,selectTopping:F})((function(e){var t=e.putInCart,n=e.selectPizza,a=e.selectTopping,r=e.item,s=e.itemType,i=e.key2,l=Object(c.useRef)();return Object(c.useEffect)((function(){var e=new IntersectionObserver((function(e){e[0].isIntersecting?e[0].target.style.transform="scale(1)":e[0].target.style=""}));return l.current&&e.observe(l.current),function(){e.disconnect()}}),[]),Object(w.jsxs)("div",{ref:l,className:s,"data-id":i,children:[Object(w.jsx)("img",{src:"/images/"+s+"s/"+r.image,alt:""}),Object(w.jsxs)("div",{className:"dashboard",children:[Object(w.jsx)("div",{children:Object(w.jsx)("svg",{viewBox:"0 0 576 512",onClick:function(e){return t(l.current,document.querySelector("."+s+"s"))},children:Object(w.jsx)("path",{fill:"currentColor",d:"M504.717 320H211.572l6.545 32h268.418c15.401 0 26.816 14.301 23.403 29.319l-5.517 24.276C523.112 414.668 536 433.828 536 456c0 31.202-25.519 56.444-56.824 55.994-29.823-.429-54.35-24.631-55.155-54.447-.44-16.287 6.085-31.049 16.803-41.548H231.176C241.553 426.165 248 440.326 248 456c0 31.813-26.528 57.431-58.67 55.938-28.54-1.325-51.751-24.385-53.251-52.917-1.158-22.034 10.436-41.455 28.051-51.586L93.883 64H24C10.745 64 0 53.255 0 40V24C0 10.745 10.745 0 24 0h102.529c11.401 0 21.228 8.021 23.513 19.19L159.208 64H551.99c15.401 0 26.816 14.301 23.403 29.319l-47.273 208C525.637 312.246 515.923 320 504.717 320zM408 168h-48v-40c0-8.837-7.163-16-16-16h-16c-8.837 0-16 7.163-16 16v40h-48c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h48v40c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-40h48c8.837 0 16-7.163 16-16v-16c0-8.837-7.163-16-16-16z"})})}),Object(w.jsx)("div",{children:Object(w.jsx)("svg",{viewBox:"0 0 512 512",onClick:function(e){return"pizza"===s?n(r):a(r)},children:Object(w.jsx)("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"})})})]}),Object(w.jsxs)("div",{className:s+"_info",children:[Object(w.jsx)("p",{children:r.name}),Object(w.jsxs)("p",{children:[r.price," Ft"]})]})]})})),B=(n(82),Object(u.b)((function(e){return{cart:e.cart,selectedPizza:e.data.selectedPizza,selectedTopping:e.data.selectedTopping}}),{selectPizza:I,selectTopping:F,modifyOrDeleteItem:E})((function(e){var t=e.selectPizza,n=e.selectTopping,a=e.modifyOrDeleteItem,r=e.cart,s=e.selectedPizza,i=e.selectedTopping,l=e.itemType,o=Object(c.useState)(0),j=Object(d.a)(o,2),b=j[0],u=j[1],h=Object(c.useState)(1),O=Object(d.a)(h,2),p=O[0],x=O[1],g=Object(c.useState)({transform:"scale(0)"}),m=Object(d.a)(g,2),v=m[0],f=m[1],z=Object(c.useState)("content"),y=Object(d.a)(z,2),k=y[0],N=y[1];return Object(c.useEffect)((function(){u("pizza"===l?s&&r.pizza[s._id]||0:i&&r.topping[i._id]||0),"pizza"===l&&s&&f({transform:"scale(1)"}),"topping"===l&&i&&f({transform:"scale(1)"}),N("content")}),[s,i,r]),Object(w.jsx)("div",{className:"ItemDetails",style:v,children:("pizza"===l&&s||"topping"===l&&i)&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("span",{className:"close",onClick:function(){f({transform:"scale(0)"}),setTimeout((function(){"pizza"===l?t(null):n(null)}),1e3)},children:"X"}),Object(w.jsx)("img",{src:"/images/"+l+"s/"+("pizza"===l?s.image:i.image),alt:""}),Object(w.jsx)("div",{className:k,children:Object(w.jsxs)("div",{className:"info",children:[Object(w.jsx)("span",{className:"closeInfo",onClick:function(){return N("content hide")},children:"X"}),Object(w.jsxs)("div",{className:l+"Info",children:[Object(w.jsx)("div",{className:"firstColumn",children:"N\xe9v:"}),Object(w.jsx)("div",{children:"pizza"===l?s.name:i.name}),Object(w.jsx)("div",{className:"firstColumn",children:"\xc1r:"}),Object(w.jsxs)("div",{children:["pizza"===l?s.price:i.price," ","Ft"]}),Object(w.jsx)("div",{className:"firstColumn",children:"Le\xedr\xe1s:"}),Object(w.jsx)("div",{children:"pizza"===l?s.description:i.description})]}),Object(w.jsxs)("div",{className:"cartInfo",children:[Object(w.jsx)("div",{children:Object(w.jsx)("svg",{viewBox:"0 0 576 512",children:Object(w.jsx)("path",{fill:"currentColor",d:"M504.717 320H211.572l6.545 32h268.418c15.401 0 26.816 14.301 23.403 29.319l-5.517 24.276C523.112 414.668 536 433.828 536 456c0 31.202-25.519 56.444-56.824 55.994-29.823-.429-54.35-24.631-55.155-54.447-.44-16.287 6.085-31.049 16.803-41.548H231.176C241.553 426.165 248 440.326 248 456c0 31.813-26.528 57.431-58.67 55.938-28.54-1.325-51.751-24.385-53.251-52.917-1.158-22.034 10.436-41.455 28.051-51.586L93.883 64H24C10.745 64 0 53.255 0 40V24C0 10.745 10.745 0 24 0h102.529c11.401 0 21.228 8.021 23.513 19.19L159.208 64H551.99c15.401 0 26.816 14.301 23.403 29.319l-47.273 208C525.637 312.246 515.923 320 504.717 320zM408 168h-48v-40c0-8.837-7.163-16-16-16h-16c-8.837 0-16 7.163-16 16v40h-48c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h48v40c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-40h48c8.837 0 16-7.163 16-16v-16c0-8.837-7.163-16-16-16z"})})}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("p",{children:["A kos\xe1rban",Object(w.jsxs)("span",{children:[" ",b," db "]}),"van"]}),Object(w.jsxs)("p",{children:["Kos\xe1rhoz adok",Object(w.jsx)("input",{type:"text",value:p,onChange:function(e){e.target.value.length>3&&(e.target.value=e.target.value.slice(0,3)),isNaN(e.target.value)&&(e.target.value=1),Number(e.target.value)<1&&(e.target.value=1),e.target.value=Number(e.target.value),x(e.target.value)}}),Object(w.jsx)("span",{className:"db",children:"db-ot."}),Object(w.jsx)("button",{onClick:function(e){a(!0,"pizza"===l?s._id:i._id,l,Number(p)+Number(b)),x(1)},type:"button",children:"Mehet!"})]})]})]})]})})]})})})));n(83);function D(e){var t=e.props;return Object(w.jsxs)("div",{className:"navigation",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{onClick:t.prev,children:"\u21e6"}),Object(w.jsxs)("span",{children:[Object(w.jsx)("input",{value:t.quantityPerPage,onChange:t.change}),"of",Object(w.jsx)("em",{children:t.data.length}),Object(w.jsx)("span",{onClick:t.increaseQuantityPerPage,children:"\u2bc5"}),Object(w.jsx)("span",{onClick:t.decreaseQuantityPerPage,children:"\u2bc6"})]}),Object(w.jsx)("span",{onClick:t.next,children:"\u21e8"})]}),Object(w.jsx)("div",{children:Object(w.jsxs)("span",{children:[0===Number(t.to)?0:t.from+1,"-",t.to]})})]})}function H(e){var t=e.items,n=e.itemType,a="pizza"===n?6:4,r=Object(c.useState)(a<=t.length?a:t.length),s=Object(d.a)(r,2),i=s[0],l=s[1],o=Object(c.useState)(0),j=Object(d.a)(o,2),b=j[0],u=j[1],h=Object(c.useState)(i),O=Object(d.a)(h,2),p=O[0],x=O[1],g=Object(c.useState)(t),m=Object(d.a)(g,2),v=m[0],f=m[1],z=function(){b>=i?(u(b-i),x(p-i)):(u(0),x(i))},y=function(){p+i<=v.length?(x(p+i),u(b+i)):(x(v.length),u(v.length-i))},k=function(e){e.target.value.length>3&&(e.target.value=e.target.value.slice(0,3)),isNaN(e.target.value)&&(e.target.value=1),Number(e.target.value)<1&&(e.target.value=1),Number(e.target.value)>v.length&&(e.target.value=v.length),e.target.value=Number(e.target.value),l(Number(e.target.value)),u(0),x(Number(e.target.value))},N=function(){i<=v.length-1&&(u(0),x(i+1),l(i+1))},C=function(){i>=2&&(u(0),x(i-1),l(i-1))};return Object(w.jsxs)("div",{className:n+"s",children:[Object(w.jsx)(B,{itemType:n}),Object(w.jsx)("div",{className:"search",children:Object(w.jsx)("input",{type:"text",placeholder:"search",onChange:function(e){return function(e){var n=t.filter((function(t){return!(!t.name.toUpperCase().includes(e.target.value.toUpperCase())&&""!==e.target.value)}));f(n),l(a<=n.length?a:n.length),u(0),x(a<=n.length?a:n.length)}(e)}})}),Object(w.jsx)(D,{props:{prev:z,next:y,data:v,quantityPerPage:i,change:k,to:p,from:b,increaseQuantityPerPage:N,decreaseQuantityPerPage:C}}),Object(w.jsx)("div",{className:"content",children:v.slice(b,p).map((function(e){return Object(w.jsx)(M,{key2:e._id,item:e,itemType:n},e._id)}))}),Object(w.jsx)(D,{props:{prev:z,next:y,data:v,quantityPerPage:i,change:k,to:p,from:b,increaseQuantityPerPage:N,decreaseQuantityPerPage:C}})]})}var _=Object(u.b)((function(e){return{data:e.data.data,loading:e.data.loading}}))((function(e){var t=e.loading,n=e.data,a=Object(c.useRef)(),r=Object(c.useRef)(),s=Object(c.useRef)();return Object(c.useEffect)((function(){var e=new IntersectionObserver((function(e){var t,n=Object(P.a)(e);try{for(n.s();!(t=n.n()).done;){var c=t.value,a=void 0;a="mainImage"===c.target.className?c.target.querySelector("img"):c.target,c.isIntersecting?a.style.transform="scale(1)":a.style=""}}catch(r){n.e(r)}finally{n.f()}}));return a.current&&r.current&&s.current&&(e.observe(a.current),e.observe(r.current),e.observe(s.current)),function(){e.disconnect()}}),[t]),Object(w.jsx)("div",{className:"Home",children:t?Object(w.jsx)("p",{children:"Loading..."}):Object(w.jsxs)("div",{className:"mainContainer",children:[Object(w.jsxs)("div",{className:"head",style:{backgroundImage:'url("head.jpg")',backgroundSize:"cover"},children:[Object(w.jsx)("img",{className:"logo",src:"logo.png",alt:""}),Object(w.jsx)("h1",{children:"Pizza Party \xc9tterem"})]}),Object(w.jsxs)("div",{className:"firstPart",children:[Object(w.jsx)("div",{className:"mainImage",ref:a,children:Object(w.jsx)("img",{src:"mainImage.jpg",alt:""})}),Object(w.jsx)("p",{className:"introduction",ref:s,style:{transform:"scale(0)"},children:'A Party Pizz\xe9ri\xe1t 1997-ben nyitottuk, t\xf6bb\xe9-kev\xe9sb\xe9 csal\xe1di v\xe1llalkoz\xe1s keret\xe9ben. Els\u0151sorban a lakoss\xe1g "pizzaig\xe9nyeit" szerett\xfck volna kiel\xe9g\xedteni, de a k\xf6rny\xe9kbeli falvakb\xf3l \xe9s a k\xf6zelebbi v\xe1rosokb\xf3l is siker\xfclt m\xe1r t\xf6rzsvend\xe9keket szerezn\xfcnk az elmult m\xe1sf\xe9l \xe9vtizedben. Gazdas\xe1gadta lehet\u0151s\xe9gekhez, \xe9s Kedves Vend\xe9geink p\xe9nzt\xe1rc\xe1j\xe1hoz igazodva megpr\xf3b\xe1ltunk az \xe1rsz\xednvonal arany k\xf6z\xe9p\xfatj\xe1n maradni, term\xe9szetesen maxim\xe1lis min\u0151s\xe9g mellett. Minden er\u0151nkb\u0151l azon dolgozunk, hogy aki t\u0151l\xfcnk t\xe1vozik, j\xf3 \xe9rz\xe9ssel- v\xe9lem\xe9nnyel, \xe9s nem utols\xf3 sorben tele hassal tegye!'})]}),Object(w.jsxs)("div",{className:"secondPart",children:[Object(w.jsx)("img",{className:"menuImage",ref:r,style:{transform:"scale(0)"},src:"menuImage.png",alt:""}),Object(w.jsxs)("div",{className:"pizzasAndToppings",children:[Object(w.jsxs)("div",{className:"pizzasContainer",children:[Object(w.jsx)("h2",{children:"Pizz\xe1k"}),n.pizza.length?Object(w.jsx)(H,{items:n.pizza,itemType:"pizza"}):Object(w.jsx)("p",{className:"warning",children:" No pizzas "})]}),Object(w.jsxs)("div",{className:"toppingsContainer",children:[Object(w.jsx)("h2",{children:"Felt\xe9tek"}),n.topping.length?Object(w.jsx)(H,{items:n.topping,itemType:"topping"}):Object(w.jsx)("p",{className:"warning",children:" No toppings "})]})]})]})]})})})),L=n(3),R=(n(84),Object(u.b)((function(e){return{cart:e.cart,data:e.data.data}}),{modifyOrDeleteItem:E})((function(e){var t=e.modifyOrDeleteItem,n=e.cart,a=e.data,r=Object(c.useState)([]),s=Object(d.a)(r,2),i=s[0],l=s[1],o=Object(c.useState)([]),j=Object(d.a)(o,2),b=j[0],u=j[1],h=0,O=function(e){var t=[],c=function(c){var r=a[e].filter((function(e){return e._id.toString()===c.toString()})).map((function(t){return Object(L.a)(Object(L.a)({},t),{},{db:n[e][c]})}))[0];t.push(r)};for(var r in n[e])c(r);"pizza"===e?l(t):u(t)},p=function(e,n){var c=0,a=e.map((function(e,a){return e&&(c+=e.price*e.db),e&&Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:e.name}),Object(w.jsx)("td",{children:e.price}),Object(w.jsx)("td",{children:Object(w.jsx)("input",{value:e.db,onChange:function(c){return function(e,n,c){e.target.value.length>3&&(e.target.value=e.target.value.slice(0,3)),isNaN(e.target.value)&&(e.target.value=1),Number(e.target.value)<1&&(e.target.value=1),e.target.value=Number(e.target.value),t(!0,n,c,e.target.value)}(c,e._id,n)}})}),Object(w.jsx)("td",{children:e.price*e.db}),Object(w.jsx)("td",{children:Object(w.jsx)("svg",{viewBox:"0 0 448 512",onClick:function(){return t(!1,e._id,n)},children:Object(w.jsx)("path",{fill:"currentColor",d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"})})})]},a)})),r=Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{colSpan:"4",style:{textAlign:"right"},children:c}),Object(w.jsx)("td",{})]});return h+=c,Object(w.jsxs)(w.Fragment,{children:[a,r]})};return Object(c.useEffect)((function(){O("pizza"),O("topping")}),[n,a]),Object(w.jsxs)("div",{className:"cartRoute",children:[Object(w.jsx)("div",{className:"title",children:Object(w.jsx)("h1",{children:"Kos\xe1r"})}),Object(w.jsxs)("div",{className:"content",children:[i.length&&Object(w.jsxs)("div",{className:"backdrop",children:[Object(w.jsx)("h2",{children:"Pizz\xe1k"}),Object(w.jsxs)("table",{children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"N\xe9v"}),Object(w.jsx)("th",{children:"Egys\xe9g\xe1r"}),Object(w.jsx)("th",{children:"db"}),Object(w.jsx)("th",{children:"\xc1r"}),Object(w.jsx)("th",{})]})}),Object(w.jsx)("tbody",{children:(h=0,p(i,"pizza"))})]})]}),b.length&&Object(w.jsxs)("div",{className:"backdrop",children:[Object(w.jsx)("h2",{children:"Felt\xe9tek"}),Object(w.jsxs)("table",{children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"N\xe9v"}),Object(w.jsx)("th",{children:"Egys\xe9g\xe1r"}),Object(w.jsx)("th",{children:"db"}),Object(w.jsx)("th",{children:"\xc1r"}),Object(w.jsx)("th",{})]})}),Object(w.jsx)("tbody",{children:p(b,"topping")})]})]}),Object(w.jsx)("div",{className:"backdrop",children:Object(w.jsxs)("p",{children:["\xd6sszesen fizetend\u0151: ",Object(w.jsx)("span",{className:"sum",children:h})]})})]})]})}))),U=n(16);n(17),n(85);function J(){return Object(w.jsx)("div",{className:"LoadingMask",children:Object(w.jsx)("img",{src:"loading.gif",alt:""})})}var K=Object(u.b)(null,{logout:N})((function(e){var t=e.logout,n=!0,a=Object(c.useState)(null),r=Object(d.a)(a,2),s=r[0],i=r[1],l=Object(c.useState)(!1),b=Object(d.a)(l,2),u=b[0],h=b[1],O=Object(c.useState)(!1),p=Object(d.a)(O,2),x=p[0],g=p[1],m=Object(c.useState)({name:"",email:"",password:"",password2:""}),v=Object(d.a)(m,2),f=v[0],y=v[1],k=f.name,N=f.email,C=f.password,S=f.password2,T=function(e){return y(Object(L.a)(Object(L.a)({},f),{},Object(U.a)({},e.target.name,e.target.value)))},A=function(){var e=Object(j.a)(o.a.mark((function e(){var c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=18;break}return c={headers:{"Content-Type":"application/json"}},e.prev=2,g(!0),e.next=6,z.a.post("/api/register",{name:k,email:N,password:C},c);case 6:a=e.sent,console.log("register action res.data: ",a.data),g(!1),h(!0),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0.response.data),g(!1),i(e.t0.response.data),t();case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"Register",children:x?Object(w.jsx)(J,{}):u?Object(w.jsx)("div",{className:"registrationSucess",children:Object(w.jsxs)("div",{className:"content",children:[Object(w.jsx)("h1",{children:"Sikeres Regiszt\xe1ci\xf3!"}),Object(w.jsx)("div",{className:"alerts",children:Object(w.jsxs)("p",{children:["Egy j\xf3v\xe1hagy\xf3 email-t k\xfcldt\xfcnk a"," ",Object(w.jsx)("span",{className:"email",children:N})," c\xedmre"]})})]})}):Object(w.jsxs)("div",{className:"content",children:[Object(w.jsx)("h1",{children:"Regisztr\xe1ci\xf3"}),Object(w.jsx)("div",{className:"alerts",children:function(){var e=[];if(n=!0,""!==k&&""!==N&&""!==C||(e.push(Object(w.jsx)("p",{children:"T\xf6lts ki minden mez\u0151t!"},e.length+1)),n=!1),C!==S&&(e.push(Object(w.jsx)("p",{children:"Jelszavak nem egyeznek!"},e.length+1)),n=!1),s&&(s.msg&&e.push(Object(w.jsx)("p",{children:s.msg},e.length+1)),s.errors)){var t,c=Object(P.a)(s.errors);try{for(c.s();!(t=c.n()).done;){var a=t.value;e.push(Object(w.jsx)("p",{children:a.msg},e.length+1))}}catch(a){c.e(a)}finally{c.f()}}return e}()}),Object(w.jsxs)("form",{children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"name",children:"N\xe9v"}),Object(w.jsx)("input",{type:"text",name:"name",placeholder:"n\xe9v",value:k,onChange:T})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"email",children:"Email"}),Object(w.jsx)("input",{type:"email",name:"email",placeholder:"email@mail.hu",value:N,onChange:T})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"password",children:"Jelsz\xf3"}),Object(w.jsx)("input",{type:"password",name:"password",value:C,onChange:T})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"password2",children:"Jelsz\xf3 meger\u0151s\xedt\xe9s"}),Object(w.jsx)("input",{type:"password",name:"password2",value:S,onChange:T})]}),Object(w.jsx)("button",{type:"button",disabled:!n,onClick:A,children:"K\xfcld\xe9s"})]})]})})})),V=Object(u.b)(null,{logout:N,setToken:C})((function(e){var t=e.logout,n=e.setToken,a=Object(c.useState)(null),r=Object(d.a)(a,2),s=r[0],i=r[1],l=Object(c.useState)(!1),u=Object(d.a)(l,2),h=u[0],O=u[1],p=Object(c.useState)({email:"",password:""}),x=Object(d.a)(p,2),g=x[0],m=x[1],v=g.email,f=g.password,y=function(e){return m(Object(L.a)(Object(L.a)({},g),{},Object(U.a)({},e.target.name,e.target.value)))},k=function(){var e=Object(j.a)(o.a.mark((function e(){var c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v||!f){e.next=18;break}return c={headers:{"Content-Type":"application/json"}},e.prev=2,O(!0),e.next=6,z.a.post("/api/login",g,c);case 6:a=e.sent,console.log("login res.data:",a.data),O(!1),n(a.data.token),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("login error:",e.t0.response.data),O(!1),i(e.t0.response.data),t();case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"Login",children:h?Object(w.jsx)(J,{}):Object(w.jsxs)("div",{className:"content",children:[Object(w.jsx)("h1",{children:"Bel\xe9p\xe9s"}),Object(w.jsxs)("div",{className:"alerts",children:[(!v||!f)&&Object(w.jsx)("p",{children:"T\xf6lts ki minden mez\u0151t!"}),s&&s.msg&&Object(w.jsx)("p",{children:s.msg}),s&&s.errors&&s.errors.map((function(e,t){return Object(w.jsx)("p",{children:e.msg},t)}))]}),Object(w.jsxs)("form",{children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"email",children:"Email"}),Object(w.jsx)("input",{type:"email",name:"email",placeholder:"email@mail.hu",value:v,onChange:y})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"password",children:"Jelsz\xf3"}),Object(w.jsx)("input",{type:"password",name:"password",value:f,onChange:y})]}),Object(w.jsx)("button",{type:"button",disabled:!v||!f,onClick:k,children:"K\xfcld\xe9s"}),Object(w.jsx)(b.b,{to:"/forgot_password",children:"Elfelejtett jelsz\xf3"})]})]})})})),q=Object(u.b)((function(e){return{cart:e.cart}}),{logout:N})((function(e){var t=e.logout,n=e.cart,a=e.history,r=!0,s=Object(c.useState)({name:"",email:"",tel:"",address:""}),i=Object(d.a)(s,2),l=i[0],b=i[1],u=Object(c.useState)(null),h=Object(d.a)(u,2),O=h[0],p=h[1],x=Object(c.useState)(!1),g=Object(d.a)(x,2),m=g[0],v=g[1],f=l.name,y=l.email,k=l.tel,N=l.address,C=function(e){return b(Object(L.a)(Object(L.a)({},l),{},Object(U.a)({},e.target.name,e.target.value)))},S=function(){var e=Object(j.a)(o.a.mark((function e(){var c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return c={headers:{"Content-Type":"application/json"}},e.prev=3,p(null),v(!0),e.next=8,z.a.post("/api/order",Object(L.a)(Object(L.a)({},l),{},{cart:n}),c);case 8:s=e.sent,v(!1),s.data&&!0===s.data.success?a.push("/orders"):t(),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(3),console.log("order error: ",e.t0.response.data),v(!1),p(e.t0.response.data),e.t0.response.data.msg&&e.t0.response.data.msg.includes("Authentication error")&&t();case 19:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"Order",children:m?Object(w.jsx)(J,{}):Object(w.jsxs)("div",{className:"content",children:[Object(w.jsx)("h1",{children:"\xdaj megrendel\xe9s"}),Object(w.jsx)("div",{className:"alerts",children:function(){var e=[];if(r=!0,""!==f&&""!==y&&""!==k&&""!==N||(e.push(Object(w.jsx)("p",{children:"T\xf6lts ki minden mez\u0151t!"},e.length+1)),r=!1),Object.keys(n.pizza).length||Object.keys(n.topping).length||(e.push(Object(w.jsx)("p",{children:"A kos\xe1r \xfcres!"},e.length+1)),r=!1),O&&(O.msg&&e.push(Object(w.jsx)("p",{children:O.msg},e.length+1)),O.errors)){var t,c=Object(P.a)(O.errors);try{for(c.s();!(t=c.n()).done;){var a=t.value;e.push(Object(w.jsx)("p",{children:a.msg},e.length+1))}}catch(a){c.e(a)}finally{c.f()}}return e}()}),Object(w.jsxs)("form",{children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"name",children:"N\xe9v"}),Object(w.jsx)("input",{type:"text",name:"name",placeholder:"n\xe9v",value:f,onChange:C})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"email",children:"Email"}),Object(w.jsx)("input",{type:"email",name:"email",placeholder:"email@mail.hu",value:y,onChange:C})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"tel",children:"Telefon"}),Object(w.jsx)("input",{type:"tel",name:"tel",placeholder:"06201234567",value:k,onChange:C})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"address",children:"C\xedm"}),Object(w.jsx)("input",{type:"text",name:"address",placeholder:"1234 V\xe1ros, Utca n\xe9v 1",value:N,onChange:C})]}),Object(w.jsx)("button",{type:"button",disabled:!r,onClick:S,children:"K\xfcld\xe9s"})]})]})})})),G=(n(86),n(87),function(e){var t=e.order,n=0,c=function(e){var c=0,a=t.cart[e].map((function(e,t){return c+=e.quantity*e.price,Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:e.name}),Object(w.jsx)("td",{children:e.price}),Object(w.jsx)("td",{children:e.quantity}),Object(w.jsx)("td",{children:e.quantity*e.price})]},t)}));return a.push(Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{colSpan:"3"}),Object(w.jsx)("td",{children:c})]},t.cart[e].length)),n+=c,a};return Object(w.jsxs)("div",{className:"OrderCard",children:[Object(w.jsx)("div",{className:"personalData",children:Object(w.jsx)("table",{children:Object(w.jsxs)("tbody",{children:[Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"N\xe9v: "}),Object(w.jsx)("td",{children:t.name})]}),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"C\xedm: "}),Object(w.jsx)("td",{children:t.address})]}),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"Email: "}),Object(w.jsx)("td",{children:t.email})]}),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"Tel: "}),Object(w.jsx)("td",{children:t.tel})]}),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:"D\xe1tum: "}),Object(w.jsx)("td",{children:new Date(t.date).toLocaleString()})]})]})})}),Object(w.jsxs)("div",{className:"cart",children:[t.cart.pizza&&t.cart.pizza.length?Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{children:"Pizz\xe1k"}),Object(w.jsxs)("table",{children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"N\xe9v"}),Object(w.jsx)("th",{children:"Egys\xe9g\xe1r"}),Object(w.jsx)("th",{children:"db"}),Object(w.jsx)("th",{children:"\xc1r"})]})}),Object(w.jsx)("tbody",{children:(n=0,c("pizza"))})]})]}):Object(w.jsx)("p",{children:"Nincsenek pizz\xe1k!"}),t.cart.topping&&t.cart.topping.length?Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{children:"Felt\xe9tek"}),Object(w.jsxs)("table",{children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"N\xe9v"}),Object(w.jsx)("th",{children:"Egys\xe9g\xe1r"}),Object(w.jsx)("th",{children:"db"}),Object(w.jsx)("th",{children:"\xc1r"})]})}),Object(w.jsx)("tbody",{children:c("topping")})]})]}):Object(w.jsx)("p",{children:"Nincsenek felt\xe9tek!"})]}),Object(w.jsxs)("div",{className:"totalSum",children:["\xd6sszesen: ",n," Ft."]})]})}),Q=Object(u.b)(null,{logout:N})((function(e){var t=e.logout,n=Object(c.useState)([]),a=Object(d.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(!1),l=Object(d.a)(i,2),b=l[0],u=l[1];return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,z.a.get("/api/orders");case 4:n=e.sent,u(!1),console.log("orders: ",n.data),s(n.data),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),u(!1),console.log(e.t0.response.data),t();case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(w.jsx)("div",{className:"Orders",children:b?Object(w.jsx)(J,{}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"title",children:Object(w.jsx)("h1",{children:"Megrendel\xe9sek"})}),Object(w.jsx)("div",{className:"content",children:r.length?r.map((function(e,t){return Object(w.jsx)(G,{order:e},t)})):Object(w.jsx)("p",{className:"info",children:"Nincsenek megrendel\xe9sek"})})]})})}));var X=Object(u.b)(null,{setToken:C,logout:N})((function(e){var t=e.setToken,n=e.logout,a=new URLSearchParams(Object(i.h)().search),r=Object(i.g)(),s=Object(c.useState)(!1),l=Object(d.a)(s,2),b=l[0],u=l[1],h=Object(c.useState)(null),O=Object(d.a)(h,2),p=O[0],x=O[1];return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(c){var s,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.get("code"),e.prev=1,u(!0),i={headers:{"Content-Type":"application/json"}},e.next=6,z.a.post("/api/google",{code:s},i);case 6:l=e.sent,console.log("google callback /api/google res.data:",l.data),u(!1),t(l.data.token),r.push("/"),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("google callback /api/google error:",e.t0.response.data),x(e.t0.response.data),u(!1),n();case 19:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}})()()}),[]),Object(w.jsx)("div",{className:"Callback",children:b?Object(w.jsx)(J,{}):Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"content",children:[Object(w.jsx)("h1",{children:"Google bel\xe9p\xe9s!"}),Object(w.jsxs)("div",{className:"alerts",children:[p&&p.msg&&Object(w.jsx)("p",{children:p.msg}),p&&p.errors&&p.errors.map((function(e,t){return Object(w.jsx)("p",{children:e.msg},t)})),!p&&Object(w.jsx)("p",{children:"A bel\xe9p\xe9s sikeres!"})]})]})})})}));var W=Object(u.b)(null,{logout:N,setToken:C})((function(e){var t=e.logout,n=e.setToken,a=new URLSearchParams(Object(i.h)().search),r=Object(i.g)(),s=Object(c.useState)(!1),l=Object(d.a)(s,2),b=l[0],u=l[1],h=Object(c.useState)(null),O=Object(d.a)(h,2),p=O[0],x=O[1];return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var c,s,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.get("email"),s=a.get("code"),e.prev=2,u(!0),i={headers:{"Content-Type":"application/json"}},e.next=7,z.a.post("/api/confirm",{email:c,code:s},i);case 7:l=e.sent,console.log("confirm res.data: ",l.data),u(!1),n(l.data.token),r.push("/"),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(2),console.log("confirm error.response.data: ",e.t0.response.data),u(!1),x(e.t0.response.data),t();case 20:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(w.jsx)("div",{className:"Confirm",children:b?Object(w.jsx)(J,{}):Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"content",children:[Object(w.jsx)("h1",{children:"Regisztr\xe1ci\xf3 meger\u0151s\xedt\xe9s!"}),Object(w.jsxs)("div",{className:"alerts",children:[p&&p.msg&&Object(w.jsx)("p",{children:p.msg}),p&&p.errors&&p.errors.map((function(e,t){return Object(w.jsx)("p",{children:e.msg},t)})),!p&&Object(w.jsx)("p",{children:"A regisztr\xe1ci\xf3d meger\u0151s\xedt\xe9sre ker\xfclt!"})]})]})})})}));function Z(){var e=new URLSearchParams(Object(i.h)().search),t=Object(i.g)(),n=Object(c.useState)(""),a=Object(d.a)(n,2),r=a[0],s=a[1],l=Object(c.useState)(""),b=Object(d.a)(l,2),u=b[0],h=b[1],O=Object(c.useState)(!1),p=Object(d.a)(O,2),x=p[0],g=p[1],m=Object(c.useState)(!1),v=Object(d.a)(m,2),f=v[0],y=v[1];return Object(w.jsx)("div",{className:"PasswordReset",children:f?Object(w.jsx)(J,{}):x?Object(w.jsx)("div",{className:"content",children:Object(w.jsx)("div",{className:"alerts",children:Object(w.jsx)("p",{children:"Az \xfaj jelsz\xf3 be\xe1ll\xedt\xe1sra ker\xfclt"})})}):Object(w.jsxs)("div",{className:"content",children:[Object(w.jsx)("h1",{children:"Add meg az \xfaj jelszavad!"}),Object(w.jsxs)("div",{className:"alerts",children:[!r&&Object(w.jsx)("p",{children:"T\xf6lts ki minden mez\u0151t!"}),u&&u.msg&&Object(w.jsx)("p",{children:u.msg}),u&&u.errors&&u.errors.map((function(e,t){return Object(w.jsx)("p",{children:e.msg},t)}))]}),Object(w.jsxs)("form",{children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"password",children:"jelsz\xf3"}),Object(w.jsx)("input",{type:"password",name:"password",value:r,onChange:function(e){return s(e.target.value)}})]}),Object(w.jsx)("button",{type:"button",disabled:!r,onClick:function(){r&&function(){var n=Object(j.a)(o.a.mark((function n(c){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={headers:{"Content-Type":"application/json"}},n.prev=1,y(!0),n.next=5,z.a.post("/api/password",{email:e.get("email"),code:e.get("code"),password:r},a);case 5:y(!1),g(!0),setTimeout((function(){t.push("/login")}),1e3),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),y(!1),h(n.t0.response.data);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}()()},children:"K\xfcld\xe9s"})]})]})})}function Y(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(d.a)(r,2),i=s[0],l=s[1],b=Object(c.useState)(!1),u=Object(d.a)(b,2),h=u[0],O=u[1],p=Object(c.useState)(!1),x=Object(d.a)(p,2),g=x[0],m=x[1];return Object(w.jsx)("div",{className:"ForgotPassword",children:g?Object(w.jsx)(J,{}):h?Object(w.jsx)("div",{className:"content",children:Object(w.jsx)("div",{className:"alerts",children:Object(w.jsxs)("p",{children:["Egy jelsz\xf3 helyre\xe1ll\xedt\xf3 email-t k\xfcldt\xfcnk a"," ",Object(w.jsx)("span",{className:"email",children:n})," c\xedmre"]})})}):Object(w.jsxs)("div",{className:"content",children:[Object(w.jsx)("h1",{children:"Add meg melyik email c\xedmhez szeretn\xe9l \xfaj jelsz\xf3t!"}),Object(w.jsxs)("div",{className:"alerts",children:[!n&&Object(w.jsx)("p",{children:"T\xf6lts ki minden mez\u0151t!"}),i&&i.msg&&Object(w.jsx)("p",{children:i.msg}),i&&i.errors&&i.errors.map((function(e,t){return Object(w.jsx)("p",{children:e.msg},t)}))]}),Object(w.jsxs)("form",{children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"email",children:"Email"}),Object(w.jsx)("input",{type:"email",name:"email",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(w.jsx)("button",{type:"button",disabled:!n,onClick:function(){n&&function(){var e=Object(j.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{"Content-Type":"application/json"}},e.prev=1,m(!0),e.next=5,z.a.post("/api/reset",{email:n},c);case 5:O(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l(e.t0.response.data);case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()()},children:"K\xfcld\xe9s"})]})]})})}n(88);var $=Object(u.b)((function(e){return{user:e.auth.user}}),null)((function(e){var t,n=e.index,c=e.twoHours,a=e.bookingMatrix,r=e.changeBookingState,s=e.date,i=e.user,l=2*c+Math.floor(15*n/60),o=15*n-60*Math.floor(15*n/60),j=(null===a||void 0===a||null===(t=a[s])||void 0===t?void 0:t[n+8*c])||!1;return Object(w.jsx)("tr",{onClick:function(){j&&"x"!==j||r("x"!==j&&"x",s,n+8*c)},children:Object(w.jsx)("td",{style:{backgroundColor:"x"===j?"gray":j===i.email?"yellow":j?"red":"green"},children:Object(w.jsxs)("span",{className:"hoursInContent",children:[l<10?"0".concat(l):l," : ",o||"00"]})})})}));function ee(e){return Object(w.jsx)("table",{className:"ContentTable",children:Object(w.jsx)("tbody",{children:function(){for(var t=[],n=0;n<8;n++)t.push(Object(w.jsx)($,Object(L.a)({index:n},e),n));return t}()})})}function te(e){var t=Object(c.useState)(!1),n=Object(d.a)(t,2),a=n[0],r=n[1];return Object(w.jsxs)("div",{className:"Td",children:[Object(w.jsx)("div",{className:"cover",onClick:function(e){return r(!0)}}),a&&Object(w.jsxs)("div",{className:"overlay",children:[Object(w.jsx)("h1",{children:e.date}),Object(w.jsx)("span",{className:"close",onClick:function(e){return r(!1)},children:"X"}),Object(w.jsx)(ee,Object(L.a)({},e))]}),Object(w.jsx)(ee,Object(L.a)({},e))]})}var ne=Object(u.b)(null,{logout:N})((function(e){var t=e.logout,n=["Vas\xe1rnap","H\xe9tf\u0151","Kedd","Szerda","Cs\xfct\xf6rt\xf6k","P\xe9ntek","Szombat"],a=Object(c.useState)([]),r=Object(d.a)(a,2),s=r[0],i=r[1],l=Object(c.useState)(0),b=Object(d.a)(l,2),u=b[0],h=b[1],O=Object(c.useState)(1),p=Object(d.a)(O,2),x=p[0],g=p[1],m=Object(c.useState)({}),v=Object(d.a)(m,2),f=v[0],y=v[1],k=Object(c.useState)(!1),N=Object(d.a)(k,2),C=N[0],S=N[1],T=Object(c.useState)(!1),P=Object(d.a)(T,2),A=P[0],E=P[1],I=Object(c.useState)(""),F=Object(d.a)(I,2),M=F[0],B=F[1],D=function(){for(var e=[],t=1;t<=7;t++){var n=6e4*(new Date).getTimezoneOffset(),c=new Date(Date.now()+24*t*60*60*1e3-n).toISOString().slice(0,10);e.push(c),1===t&&h(new Date(c).getDay())}i(e)},H=function e(t,n,c){"string"==typeof n&&(n=n.split(".")),t[n[0]]=t[n[0]]||{};var a=t[n[0]];return n.length>1?(n.shift(),e(a,n,c)):t[n[0]]=c,t},_=function(e,t,n){var c=Object(L.a)({},f);e?H(c,[x,t,n],e):delete c[x][t][n];var a=!1;for(var r in c)if(Object.keys(c[r]).length)for(var s in c[r])if(Object.keys(c[r][s]).length)for(var i in c[r][s])"x"===c[r][s][i]&&(a=!0);else delete c[r][s];else delete c[r];S(a),y(c)};return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var n,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(),e.prev=1,E(!0),e.next=5,z.a.get("/api/bookings");case 5:a=e.sent,console.log((null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.data)||{}),E(!1),y((null===a||void 0===a||null===(c=a.data)||void 0===c?void 0:c.data)||{}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0.response.data),E(!1),t();case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(w.jsxs)("div",{className:"BookingContainer",children:[M&&Object(w.jsx)("div",{className:"Error",onClick:function(e){return B("")},children:M}),Object(w.jsxs)("div",{className:"Booking",children:[A&&Object(w.jsx)(J,{}),C&&Object(w.jsx)("button",{onClick:function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var n,c,a,r,s,i,l,j,d,b,u,h,O,p,x,g,m,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c in n={},f)for(a in f[c])for(r in f[c][a])"x"===f[c][a][r]&&((null===n||void 0===n||null===(s=n[c])||void 0===s?void 0:s[a])?n[c][a].push(parseInt(r)):H(n,[c,a],[parseInt(r)]));return console.log(n),i={headers:{"Content-Type":"application/json"}},e.prev=4,E(!0),e.next=8,z.a.post("/api/bookings",{data:n},i);case 8:d=e.sent,console.log((null===d||void 0===d||null===(l=d.data)||void 0===l?void 0:l.data)||{}),y((null===d||void 0===d||null===(j=d.data)||void 0===j?void 0:j.data)||{}),S(!1),E(!1),e.next=22;break;case 15:e.prev=15,e.t0=e.catch(4),E(!1),(null===e.t0||void 0===e.t0||null===(b=e.t0.response)||void 0===b||null===(u=b.data)||void 0===u||null===(h=u.msg)||void 0===h?void 0:h.includes("Authentication error"))&&t(),console.log("Booking error:",null===e.t0||void 0===e.t0||null===(O=e.t0.response)||void 0===O||null===(p=O.data)||void 0===p?void 0:p.msg),(null===e.t0||void 0===e.t0||null===(x=e.t0.response)||void 0===x||null===(g=x.data)||void 0===g?void 0:g.msg)&&B(e.t0.response.data.msg),(null===e.t0||void 0===e.t0||null===(m=e.t0.response)||void 0===m||null===(v=m.data)||void 0===v?void 0:v.data)&&y(e.t0.response.data.data);case 22:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(){return e.apply(this,arguments)}})()()},children:"Foglal\xe1s k\xfcld\xe9se"}),Object(w.jsxs)("select",{onChange:function(e){return g(e.target.value)},children:[Object(w.jsx)("option",{value:"1",children:"1. asztal"}),Object(w.jsx)("option",{value:"2",children:"2. asztal"}),Object(w.jsx)("option",{value:"3",children:"3. asztal"}),Object(w.jsx)("option",{value:"4",children:"4. asztal"}),Object(w.jsx)("option",{value:"5",children:"5. asztal"}),Object(w.jsx)("option",{value:"6",children:"6. asztal"}),Object(w.jsx)("option",{value:"7",children:"7. asztal"}),Object(w.jsx)("option",{value:"8",children:"8. asztal"}),Object(w.jsx)("option",{value:"9",children:"9. asztal"}),Object(w.jsx)("option",{value:"10",children:"10. asztal"})]}),Object(w.jsxs)("table",{className:"BookingTable",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{className:"hours"}),function(){for(var e=[],t=u,c=0;c<7;t++,c++)e.push(Object(w.jsxs)("th",{children:[s[c],Object(w.jsx)("br",{}),"(",n[t],")"]},c)),6===t&&(t=-1);return e}()]})}),Object(w.jsx)("tbody",{children:function(){for(var e=[],t=0;t<12;t++){for(var n=[],c=0;c<7;c++)n.push(Object(w.jsx)("td",{children:Object(w.jsx)(te,{date:s[c],twoHours:t,bookingMatrix:null===f||void 0===f?void 0:f[x],changeBookingState:_})},c));var a=2*t;n.unshift(Object(w.jsx)("td",{className:"hours",children:Object(w.jsxs)("span",{children:[a<10?"0".concat(a):a," : 00"]})},"7")),e.push(Object(w.jsx)("tr",{children:n},t))}return e}()})]})]})]})}));n(89),n(90);function ce(e){var t=e.tableNumber,n=e.start,c=e.end;return Object(w.jsxs)("div",{className:"BookingCardContainer",children:[Object(w.jsxs)("div",{className:"BookingCard",children:[Object(w.jsxs)("p",{children:["Foglal\xe1s a ",t," sz\xe1m\xfa asztaln\xe1l"]}),Object(w.jsxs)("p",{children:[new Date(n).toLocaleDateString()," ",["Vas\xe1rnap","H\xe9tf\u0151","Kedd","Szerda","Cs\xfct\xf6rt\xf6k","P\xe9ntek","Szombat"][new Date(n).getDay()]]}),Object(w.jsxs)("p",{children:[new Date(n).toLocaleTimeString()," -t\xf3l"]}),Object(w.jsxs)("p",{children:[new Date(c).toLocaleTimeString()," -ig"]})]}),Object(w.jsx)("div",{className:"shadow"})]})}var ae=Object(u.b)(null,{logout:N})((function(e){var t=e.logout,n=Object(c.useState)([]),a=Object(d.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(!1),l=Object(d.a)(i,2),b=l[0],u=l[1];return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,z.a.get("/api/user_bookings");case 4:n=e.sent,u(!1),s(n.data.userBookingsArray),console.log("user bookings: ",n.data),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),u(!1),console.log("user bookings error: ",e.t0),t();case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(w.jsx)("div",{className:"UserBookings",children:b?Object(w.jsx)(J,{}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"title",children:Object(w.jsx)("h1",{children:"Asztalfoglal\xe1sok"})}),Object(w.jsx)("div",{className:"content",children:r.map((function(e,t){return Object(w.jsx)(ce,{tableNumber:e.tableNumber,start:e.start,end:e.end},t)}))})]})})})),re=n(25),se=["isAuthenticated","loading","component"],ie=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,loading:e.auth.loading}}))((function(e){var t=e.isAuthenticated,n=e.loading,c=e.component,a=Object(re.a)(e,se);return Object(w.jsx)(i.b,Object(L.a)(Object(L.a)({},a),{},{render:function(e){return n?Object(w.jsx)(J,{}):t?Object(w.jsx)(c,Object(L.a)({},e)):Object(w.jsx)(i.a,{to:"/login"})}}))})),le=["isAuthenticated","loading","component"],oe=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,loading:e.auth.loading}}))((function(e){var t=e.isAuthenticated,n=e.loading,c=e.component,a=Object(re.a)(e,le);return Object(w.jsx)(i.b,Object(L.a)(Object(L.a)({},a),{},{render:function(e){return n?Object(w.jsx)(J,{}):t?Object(w.jsx)(i.a,{to:"/"}):Object(w.jsx)(c,Object(L.a)({},e))}}))})),je=Object(u.b)((function(e){return{loadingData:e.data.loading}}),{setData:function(){return function(){var e=Object(j.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z()("/api/data");case 3:n=e.sent,t({type:p,payload:n.data}),t({type:v,payload:{pizza:n.data.pizza.map((function(e){return e._id.toString()})),topping:n.data.topping.map((function(e){return e._id.toString()}))}}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("getting pizza data error: ",e.t0),t({type:p,payload:{pizza:[],topping:[]}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},loadUser:function(){return function(){var e=Object(j.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=localStorage.token)&&y(n),e.prev=2,e.next=5,z.a.get("/api/loaduser");case 5:c=e.sent,t({type:h,payload:{token:n,user:c.data}}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("auth actions load user error:",e.t0),t({type:O});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.loadingData,n=e.setData,a=e.loadUser,r=Object(i.h)();return Object(c.useEffect)((function(){console.log("app.js location.pathname: ",r.pathname),n(),"/confirm"!==r.pathname&&"/callback"!==r.pathname&&a()}),[]),Object(w.jsxs)("div",{className:"App",style:{backgroundImage:'url("background.svg")',backgroundSize:"contain"},children:[Object(w.jsx)(T,{}),Object(w.jsxs)(i.d,{children:[Object(w.jsx)(oe,{path:"/register",component:K}),Object(w.jsx)(oe,{path:"/login",component:V}),Object(w.jsx)(ie,{path:"/order",component:q}),Object(w.jsx)(ie,{path:"/orders",component:Q}),Object(w.jsx)(ie,{path:"/booking",component:ne}),Object(w.jsx)(ie,{path:"/bookings",component:ae}),Object(w.jsx)(i.b,{path:"/confirm",component:W}),Object(w.jsx)(i.b,{path:"/callback",component:X}),Object(w.jsx)(i.b,{path:"/password_reset",component:Z}),Object(w.jsx)(i.b,{path:"/forgot_password",component:Y}),Object(w.jsx)(i.b,{path:"/cart",children:t?Object(w.jsx)(J,{}):Object(w.jsx)(R,{})}),Object(w.jsx)(i.b,{exact:!0,path:"/",children:t?Object(w.jsx)(J,{}):Object(w.jsx)(_,{})}),Object(w.jsx)(i.a,{to:"/"})]})]})})),de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,92)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},be=n(21),ue=n(41),he=n(42),Oe={token:localStorage.getItem("token"),isAuthenticated:!1,loading:!0,user:null},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return console.log("auth reducer login success action payload:",t.payload),localStorage.setItem("token",t.payload.token),y(t.payload.token),Object(L.a)(Object(L.a)({},e),{},{token:t.payload.token,user:t.payload.user,isAuthenticated:!0,loading:!1});case O:return localStorage.removeItem("token"),y(),Object(L.a)(Object(L.a)({},e),{},{user:null,token:null,isAuthenticated:!1,loading:!1});default:return e}},xe=function(){return localStorage&&(localStorage.partyPizza||(localStorage.partyPizza=JSON.stringify({pizza:{},topping:{}}))),localStorage.partyPizza?JSON.parse(localStorage.partyPizza):{}},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return{pizza:Object(L.a)({},t.payload.pizza),topping:Object(L.a)({},t.payload.topping)};case v:var n=Object(L.a)({},e.pizza),c=Object(L.a)({},e.topping);for(var a in n)t.payload.pizza.includes(a.toString())||delete n[a];for(var r in c)t.payload.topping.includes(r.toString())||delete c[r];return localStorage.partyPizza=JSON.stringify({pizza:n,topping:c}),Object(L.a)(Object(L.a)({},e),{},{pizza:n,topping:c});default:return e}},me=n(30),ve={data:{topping:[],pizza:[]},selectedPizza:null,selectedTopping:null,loading:!0},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(L.a)(Object(L.a)({},e),{},{data:{pizza:Object(me.a)(t.payload.pizza),topping:Object(me.a)(t.payload.topping)},loading:!1});case x:return Object(L.a)(Object(L.a)({},e),{},{selectedPizza:t.payload});case g:return Object(L.a)(Object(L.a)({},e),{},{selectedTopping:t.payload});default:return e}},ze=Object(be.combineReducers)({auth:pe,cart:ge,data:fe}),ye=[he.a],ke=Object(be.createStore)(ze,{},Object(ue.composeWithDevTools)(be.applyMiddleware.apply(void 0,ye)));s.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(b.a,{children:Object(w.jsx)(u.a,{store:ke,children:Object(w.jsx)(je,{})})})}),document.getElementById("root")),de()}},[[91,1,2]]]);
//# sourceMappingURL=main.4819dc85.chunk.js.map