(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{18:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(24),s=n.n(r),i=(n(47),n(48),n(10)),l=n(3),o=n(4),j=n.n(o),d=n(7),b=n(2),u=(n(50),n(8)),h=n(5),O="LOGIN_SUCCESS",p="LOGOUT",x="SET_USER",g="SET_DATA",v="SELECT_PIZZA",m="SELECT_TOPPING",f="SET_CART",z="CHECK_CART",k=n(6),y=n.n(k),N=function(e){e?y.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete y.a.defaults.headers.common.Authorization},S=n(40);y.a.defaults.baseURL="https://cryptic-brushlands-33727.herokuapp.com";var C=function(){return{type:p}},w=function(e){var t=Object(S.a)(e).user;return{type:O,payload:{token:e,user:t}}},T=function(e){return{type:x,payload:e}};function P(e){var t=e.onChange,n=Object(a.useRef)(),r=c.a.Children.toArray(e.children);return Object(a.useEffect)((function(){if(n.current&&!n.current.innerText){for(var e=String.fromCharCode(160),t=0;t<2;t++)e+=e;n.current.innerText=e}}),[]),r=c.a.cloneElement(r[0],{contentEditable:!0,suppressContentEditableWarning:!0,ref:n,onKeyUp:function(){if(n.current){if(!n.current.innerText){for(var e=String.fromCharCode(160),a=0;a<2;a++)e+=e;n.current.innerText=e}t(n.current.innerText)}}})}var I=function(e,t){var n=0;for(var a in e){var c=function(c){n+=Number(e[a][c])*t[a].filter((function(e){return e._id.toString()===c.toString()})).map((function(e){return e.price}))};for(var r in e[a])c(r)}return n},D=n(0),M=Object(h.b)((function(e){return{cart:e.cart,data:e.data.data,user:e.auth.user}}),{logout:C,setUser:T})((function(e){var t=e.logout,n=e.setUser,c=e.user,r=e.cart,s=e.data,i=Object(a.useState)("a"),o=Object(b.a)(i,2),h=o[0],O=o[1],p=Object(a.useState)("b"),x=Object(b.a)(p,2),g=x[0],v=x[1],m=Object(a.useState)("c"),f=Object(b.a)(m,2),z=f[0],k=f[1],N=Object(a.useState)("dropDownMenu"),S=Object(b.a)(N,2),C=S[0],w=S[1],T=function(){var e=Object(d.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/get_auth_info");case 3:t=e.sent,n=t.data.authUrl,window.location.href=n,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Get auth url error: ",e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(d.a)(j.a.mark((function e(a){var r,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,y.a.post("/api/name_change",{newName:a},r);case 4:e.sent.data.success?(console.log("name change happened: ",a),n(Object(l.a)(Object(l.a)({},c),{},{name:a}))):t(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("name change error: ",e.t0.response.data),(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.msg)&&"Authentication error"===e.t0.response.data.msg&&t();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),A=Object(a.useRef)();return Object(D.jsxs)("div",{className:"NavBar",children:[Object(D.jsxs)("div",{className:C,children:[Object(D.jsx)(u.b,{to:"/",children:Object(D.jsx)("span",{children:"Home"})}),c?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(u.b,{to:"/order",children:Object(D.jsx)("span",{children:"\xdaj megrenel\xe9s"})}),Object(D.jsx)(u.b,{to:"/orders",children:Object(D.jsx)("span",{children:"Megrendel\xe9sek"})}),Object(D.jsx)(u.b,{to:"/booking",children:Object(D.jsx)("span",{children:"\xdaj asztalfoglal\xe1s"})}),Object(D.jsx)(u.b,{to:"/bookings",children:Object(D.jsx)("span",{children:"Asztalfoglal\xe1sok"})})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(u.b,{to:"/register",children:Object(D.jsx)("span",{children:"Regisztr\xe1ci\xf3"})}),Object(D.jsx)(u.b,{to:"/login",children:Object(D.jsx)("span",{children:"Bel\xe9p\xe9s"})})]})]}),Object(D.jsxs)("div",{className:"icons",children:[Object(D.jsx)("div",{className:"hamburger",onClick:function(e){"a"===h?(O("ax"),v("bx"),k("cx"),w("dropDownMenu show")):(O("a"),v("b"),k("c"),w("dropDownMenu"))},children:Object(D.jsxs)("svg",{viewBox:"0 0 40 40",children:[Object(D.jsx)("rect",{className:h,x:"0",y:"0",width:"20",height:"2"}),Object(D.jsx)("rect",{className:g,x:"0",y:"0",width:"20",height:"2"}),Object(D.jsx)("rect",{className:z,x:"0",y:"0",width:"20",height:"2"})]})}),Object(D.jsx)("div",{className:"cart",children:Object(D.jsxs)(u.b,{to:"/cart",children:[Object(D.jsx)("svg",{id:"cart",viewBox:"0 0 576 512",children:Object(D.jsx)("path",{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"})}),Object(D.jsx)("span",{children:I(r,s)})]})})]}),Object(D.jsxs)("div",{className:"linksAndUser",children:[Object(D.jsxs)("div",{className:"links",children:[Object(D.jsxs)(u.c,{to:"/",exact:!0,children:["Home"," "]}),c?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("span",{className:"loggedIn",children:["Megrendel\xe9s",Object(D.jsxs)("div",{className:"order",children:[Object(D.jsx)(u.c,{to:"/order",children:"\xdaj megrendel\xe9s"}),Object(D.jsx)(u.c,{to:"/orders",children:"Megrendel\xe9sek "})]})]}),Object(D.jsxs)("span",{className:"loggedIn",children:["Asztalfoglal\xe1s",Object(D.jsxs)("div",{className:"booking",children:[Object(D.jsx)(u.c,{to:"/booking",children:"\xdaj asztalfoglal\xe1s"}),Object(D.jsx)(u.c,{to:"/bookings",children:"Asztalfoglal\xe1sok"})]})]})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(u.c,{to:"/register",children:"Regisztr\xe1ci\xf3"}),Object(D.jsx)(u.c,{to:"/login",children:"Bel\xe9p\xe9s"})]})]}),Object(D.jsxs)("div",{className:"userInfo",children:[c&&"no-image.png"!==c.photo&&Object(D.jsx)("img",{src:c.photo,alt:""}),c?Object(D.jsx)(u.b,{to:"/profile",children:Object(D.jsx)(P,{onChange:function(e){clearTimeout(A.current),A.current=setTimeout((function(){M(e)}),2e3)},children:Object(D.jsx)("span",{className:"userName",children:c.name})})}):Object(D.jsxs)("span",{className:"notLoggedIn",onClick:T,children:["Bel\xe9p\xe9s",Object(D.jsx)("img",{src:"google.png",alt:""}),"-al!"]}),c&&Object(D.jsx)("div",{className:"logout",onClick:function(){return t()},children:Object(D.jsx)("svg",{viewBox:"0 0 512 512",children:Object(D.jsx)("path",{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"})})})]})]})]})})),A=n(17),E=(n(79),n(80),n(81),function(e,t){var n=document.getElementById("cart").getBoundingClientRect(),a=e.getBoundingClientRect(),c=e.cloneNode(!0);t.insertBefore(c,t.firstElementChild),c.style.position="fixed",c.style.zIndex=2,c.style.left=Math.floor(a.left)+"px",c.style.top=Math.floor(a.top)+"px",c.style.width=Math.floor(a.width)+"px",c.style.height=Math.floor(a.height)+"px",setTimeout((function(){c.style.left=Math.floor(n.left)+"px",c.style.top=Math.floor(n.top)+"px",c.style.width=Math.floor(n.width)+"px",c.style.height=Math.floor(n.height)+"px",c.style.transition="2s"}),100),setTimeout((function(){c.remove()}),2100)}),F=function(e,t,n,a){if(localStorage){var c=JSON.parse(localStorage.partyPizza);return e?c[n][t]=a:delete c[n][t],localStorage.partyPizza=JSON.stringify(c),{type:f,payload:c}}},B=function(e){return{type:v,payload:e}},H=function(e){return{type:m,payload:e}},_=Object(h.b)(null,{putInCart:function(e,t){if(localStorage){var n=JSON.parse(localStorage.partyPizza);return n[e.className][e.dataset.id]?n[e.className][e.dataset.id]=Number(n[e.className][e.dataset.id])+1:n[e.className][e.dataset.id]=1,localStorage.partyPizza=JSON.stringify(n),E(e,t),{type:f,payload:n}}},selectPizza:B,selectTopping:H})((function(e){var t=e.putInCart,n=e.selectPizza,c=e.selectTopping,r=e.item,s=e.itemType,i=e.key2,l=Object(a.useRef)();return Object(a.useEffect)((function(){var e=new IntersectionObserver((function(e){e[0].isIntersecting?e[0].target.style.transform="scale(1)":e[0].target.style=""}));return l.current&&e.observe(l.current),function(){e.disconnect()}}),[]),Object(D.jsxs)("div",{ref:l,className:s,"data-id":i,children:[Object(D.jsx)("img",{src:"/images/"+s+"s/"+r.image,alt:""}),Object(D.jsxs)("div",{className:"dashboard",children:[Object(D.jsx)("div",{children:Object(D.jsx)("svg",{viewBox:"0 0 576 512",onClick:function(e){return t(l.current,document.querySelector("."+s+"s"))},children:Object(D.jsx)("path",{fill:"currentColor",d:"M504.717 320H211.572l6.545 32h268.418c15.401 0 26.816 14.301 23.403 29.319l-5.517 24.276C523.112 414.668 536 433.828 536 456c0 31.202-25.519 56.444-56.824 55.994-29.823-.429-54.35-24.631-55.155-54.447-.44-16.287 6.085-31.049 16.803-41.548H231.176C241.553 426.165 248 440.326 248 456c0 31.813-26.528 57.431-58.67 55.938-28.54-1.325-51.751-24.385-53.251-52.917-1.158-22.034 10.436-41.455 28.051-51.586L93.883 64H24C10.745 64 0 53.255 0 40V24C0 10.745 10.745 0 24 0h102.529c11.401 0 21.228 8.021 23.513 19.19L159.208 64H551.99c15.401 0 26.816 14.301 23.403 29.319l-47.273 208C525.637 312.246 515.923 320 504.717 320zM408 168h-48v-40c0-8.837-7.163-16-16-16h-16c-8.837 0-16 7.163-16 16v40h-48c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h48v40c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-40h48c8.837 0 16-7.163 16-16v-16c0-8.837-7.163-16-16-16z"})})}),Object(D.jsx)("div",{children:Object(D.jsx)("svg",{viewBox:"0 0 512 512",onClick:function(e){return"pizza"===s?n(r):c(r)},children:Object(D.jsx)("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"})})})]}),Object(D.jsxs)("div",{className:s+"_info",children:[Object(D.jsx)("p",{children:r.name}),Object(D.jsxs)("p",{children:[r.price," Ft"]})]})]})})),L=(n(82),Object(h.b)((function(e){return{cart:e.cart,selectedPizza:e.data.selectedPizza,selectedTopping:e.data.selectedTopping}}),{selectPizza:B,selectTopping:H,modifyOrDeleteItem:F})((function(e){var t=e.selectPizza,n=e.selectTopping,c=e.modifyOrDeleteItem,r=e.cart,s=e.selectedPizza,i=e.selectedTopping,l=e.itemType,o=Object(a.useState)(0),j=Object(b.a)(o,2),d=j[0],u=j[1],h=Object(a.useState)(1),O=Object(b.a)(h,2),p=O[0],x=O[1],g=Object(a.useState)({transform:"scale(0)"}),v=Object(b.a)(g,2),m=v[0],f=v[1],z=Object(a.useState)("content"),k=Object(b.a)(z,2),y=k[0],N=k[1];return Object(a.useEffect)((function(){u("pizza"===l?s&&r.pizza[s._id]||0:i&&r.topping[i._id]||0),"pizza"===l&&s&&f({transform:"scale(1)"}),"topping"===l&&i&&f({transform:"scale(1)"}),N("content")}),[s,i,r]),Object(D.jsx)("div",{className:"ItemDetails",style:m,children:("pizza"===l&&s||"topping"===l&&i)&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("span",{className:"close",onClick:function(){f({transform:"scale(0)"}),setTimeout((function(){"pizza"===l?t(null):n(null)}),1e3)},children:"X"}),Object(D.jsx)("img",{src:"/images/"+l+"s/"+("pizza"===l?s.image:i.image),alt:""}),Object(D.jsx)("div",{className:y,children:Object(D.jsxs)("div",{className:"info",children:[Object(D.jsx)("span",{className:"closeInfo",onClick:function(){return N("content hide")},children:"X"}),Object(D.jsxs)("div",{className:l+"Info",children:[Object(D.jsx)("div",{className:"firstColumn",children:"N\xe9v:"}),Object(D.jsx)("div",{children:"pizza"===l?s.name:i.name}),Object(D.jsx)("div",{className:"firstColumn",children:"\xc1r:"}),Object(D.jsxs)("div",{children:["pizza"===l?s.price:i.price," ","Ft"]}),Object(D.jsx)("div",{className:"firstColumn",children:"Le\xedr\xe1s:"}),Object(D.jsx)("div",{children:"pizza"===l?s.description:i.description})]}),Object(D.jsxs)("div",{className:"cartInfo",children:[Object(D.jsx)("div",{children:Object(D.jsx)("svg",{viewBox:"0 0 576 512",children:Object(D.jsx)("path",{fill:"currentColor",d:"M504.717 320H211.572l6.545 32h268.418c15.401 0 26.816 14.301 23.403 29.319l-5.517 24.276C523.112 414.668 536 433.828 536 456c0 31.202-25.519 56.444-56.824 55.994-29.823-.429-54.35-24.631-55.155-54.447-.44-16.287 6.085-31.049 16.803-41.548H231.176C241.553 426.165 248 440.326 248 456c0 31.813-26.528 57.431-58.67 55.938-28.54-1.325-51.751-24.385-53.251-52.917-1.158-22.034 10.436-41.455 28.051-51.586L93.883 64H24C10.745 64 0 53.255 0 40V24C0 10.745 10.745 0 24 0h102.529c11.401 0 21.228 8.021 23.513 19.19L159.208 64H551.99c15.401 0 26.816 14.301 23.403 29.319l-47.273 208C525.637 312.246 515.923 320 504.717 320zM408 168h-48v-40c0-8.837-7.163-16-16-16h-16c-8.837 0-16 7.163-16 16v40h-48c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h48v40c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-40h48c8.837 0 16-7.163 16-16v-16c0-8.837-7.163-16-16-16z"})})}),Object(D.jsxs)("div",{children:[Object(D.jsxs)("p",{children:["A kos\xe1rban",Object(D.jsxs)("span",{children:[" ",d," db "]}),"van"]}),Object(D.jsxs)("p",{children:["Kos\xe1rhoz adok",Object(D.jsx)("input",{type:"text",value:p,onChange:function(e){e.target.value.length>3&&(e.target.value=e.target.value.slice(0,3)),isNaN(e.target.value)&&(e.target.value=1),Number(e.target.value)<1&&(e.target.value=1),e.target.value=Number(e.target.value),x(e.target.value)}}),Object(D.jsx)("span",{className:"db",children:"db-ot."}),Object(D.jsx)("button",{onClick:function(e){c(!0,"pizza"===l?s._id:i._id,l,Number(p)+Number(d)),x(1)},type:"button",children:"Mehet!"})]})]})]})]})})]})})})));n(83);function R(e){var t=e.props;return Object(D.jsxs)("div",{className:"navigation",children:[Object(D.jsxs)("div",{children:[Object(D.jsx)("span",{onClick:t.prev,children:"\u21e6"}),Object(D.jsxs)("span",{children:[Object(D.jsx)("input",{value:t.quantityPerPage,onChange:t.change}),"of",Object(D.jsx)("em",{children:t.data.length}),Object(D.jsx)("span",{onClick:t.increaseQuantityPerPage,children:"\u2bc5"}),Object(D.jsx)("span",{onClick:t.decreaseQuantityPerPage,children:"\u2bc6"})]}),Object(D.jsx)("span",{onClick:t.next,children:"\u21e8"})]}),Object(D.jsx)("div",{children:Object(D.jsxs)("span",{children:[0===Number(t.to)?0:t.from+1,"-",t.to]})})]})}function U(e){var t=e.items,n=e.itemType,c="pizza"===n?6:4,r=Object(a.useState)(c<=t.length?c:t.length),s=Object(b.a)(r,2),i=s[0],l=s[1],o=Object(a.useState)(0),j=Object(b.a)(o,2),d=j[0],u=j[1],h=Object(a.useState)(i),O=Object(b.a)(h,2),p=O[0],x=O[1],g=Object(a.useState)(t),v=Object(b.a)(g,2),m=v[0],f=v[1],z=function(){d>=i?(u(d-i),x(p-i)):(u(0),x(i))},k=function(){p+i<=m.length?(x(p+i),u(d+i)):(x(m.length),u(m.length-i))},y=function(e){e.target.value.length>3&&(e.target.value=e.target.value.slice(0,3)),isNaN(e.target.value)&&(e.target.value=1),Number(e.target.value)<1&&(e.target.value=1),Number(e.target.value)>m.length&&(e.target.value=m.length),e.target.value=Number(e.target.value),l(Number(e.target.value)),u(0),x(Number(e.target.value))},N=function(){i<=m.length-1&&(u(0),x(i+1),l(i+1))},S=function(){i>=2&&(u(0),x(i-1),l(i-1))};return Object(D.jsxs)("div",{className:n+"s",children:[Object(D.jsx)(L,{itemType:n}),Object(D.jsx)("div",{className:"search",children:Object(D.jsx)("input",{type:"text",placeholder:"search",onChange:function(e){return function(e){var n=t.filter((function(t){return!(!t.name.toUpperCase().includes(e.target.value.toUpperCase())&&""!==e.target.value)}));f(n),l(c<=n.length?c:n.length),u(0),x(c<=n.length?c:n.length)}(e)}})}),Object(D.jsx)(R,{props:{prev:z,next:k,data:m,quantityPerPage:i,change:y,to:p,from:d,increaseQuantityPerPage:N,decreaseQuantityPerPage:S}}),Object(D.jsx)("div",{className:"content",children:m.slice(d,p).map((function(e){return Object(D.jsx)(_,{key2:e._id,item:e,itemType:n},e._id)}))}),Object(D.jsx)(R,{props:{prev:z,next:k,data:m,quantityPerPage:i,change:y,to:p,from:d,increaseQuantityPerPage:N,decreaseQuantityPerPage:S}})]})}var V=Object(h.b)((function(e){return{data:e.data.data,loading:e.data.loading}}))((function(e){var t=e.loading,n=e.data,c=Object(a.useRef)(),r=Object(a.useRef)(),s=Object(a.useRef)();return Object(a.useEffect)((function(){var e=new IntersectionObserver((function(e){var t,n=Object(A.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,c=void 0;c="mainImage"===a.target.className?a.target.querySelector("img"):a.target,a.isIntersecting?c.style.transform="scale(1)":c.style=""}}catch(r){n.e(r)}finally{n.f()}}));return c.current&&r.current&&s.current&&(e.observe(c.current),e.observe(r.current),e.observe(s.current)),function(){e.disconnect()}}),[t]),Object(D.jsx)("div",{className:"Home",children:t?Object(D.jsx)("p",{children:"Loading..."}):Object(D.jsxs)("div",{className:"mainContainer",children:[Object(D.jsxs)("div",{className:"head",style:{backgroundImage:'url("head.jpg")',backgroundSize:"cover"},children:[Object(D.jsx)("img",{className:"logo",src:"logo.png",alt:""}),Object(D.jsx)("h1",{children:"Pizza Party \xc9tterem"})]}),Object(D.jsxs)("div",{className:"firstPart",children:[Object(D.jsx)("div",{className:"mainImage",ref:c,children:Object(D.jsx)("img",{src:"mainImage.jpg",alt:""})}),Object(D.jsx)("p",{className:"introduction",ref:s,style:{transform:"scale(0)"},children:'A Party Pizz\xe9ri\xe1t 1997-ben nyitottuk, t\xf6bb\xe9-kev\xe9sb\xe9 csal\xe1di v\xe1llalkoz\xe1s keret\xe9ben. Els\u0151sorban a lakoss\xe1g "pizzaig\xe9nyeit" szerett\xfck volna kiel\xe9g\xedteni, de a k\xf6rny\xe9kbeli falvakb\xf3l \xe9s a k\xf6zelebbi v\xe1rosokb\xf3l is siker\xfclt m\xe1r t\xf6rzsvend\xe9keket szerezn\xfcnk az elmult m\xe1sf\xe9l \xe9vtizedben. Gazdas\xe1gadta lehet\u0151s\xe9gekhez, \xe9s Kedves Vend\xe9geink p\xe9nzt\xe1rc\xe1j\xe1hoz igazodva megpr\xf3b\xe1ltunk az \xe1rsz\xednvonal arany k\xf6z\xe9p\xfatj\xe1n maradni, term\xe9szetesen maxim\xe1lis min\u0151s\xe9g mellett. Minden er\u0151nkb\u0151l azon dolgozunk, hogy aki t\u0151l\xfcnk t\xe1vozik, j\xf3 \xe9rz\xe9ssel- v\xe9lem\xe9nnyel, \xe9s nem utols\xf3 sorben tele hassal tegye!'})]}),Object(D.jsxs)("div",{className:"secondPart",children:[Object(D.jsx)("img",{className:"menuImage",ref:r,style:{transform:"scale(0)"},src:"menuImage.png",alt:""}),Object(D.jsxs)("div",{className:"pizzasAndToppings",children:[Object(D.jsxs)("div",{className:"pizzasContainer",children:[Object(D.jsx)("h2",{children:"Pizz\xe1k"}),n.pizza.length?Object(D.jsx)(U,{items:n.pizza,itemType:"pizza"}):Object(D.jsx)("p",{className:"warning",children:" No pizzas "})]}),Object(D.jsxs)("div",{className:"toppingsContainer",children:[Object(D.jsx)("h2",{children:"Felt\xe9tek"}),n.topping.length?Object(D.jsx)(U,{items:n.topping,itemType:"topping"}):Object(D.jsx)("p",{className:"warning",children:" No toppings "})]})]})]})]})})})),J=(n(84),Object(h.b)((function(e){return{cart:e.cart,data:e.data.data}}),{modifyOrDeleteItem:F})((function(e){var t=e.modifyOrDeleteItem,n=e.cart,c=e.data,r=Object(a.useState)([]),s=Object(b.a)(r,2),i=s[0],o=s[1],j=Object(a.useState)([]),d=Object(b.a)(j,2),u=d[0],h=d[1],O=0,p=function(e){var t=[],a=function(a){var r=c[e].filter((function(e){return e._id.toString()===a.toString()})).map((function(t){return Object(l.a)(Object(l.a)({},t),{},{db:n[e][a]})}))[0];t.push(r)};for(var r in n[e])a(r);"pizza"===e?o(t):h(t)},x=function(e,n){var a=0,c=e.map((function(e,c){return e&&(a+=e.price*e.db),e&&Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:e.name}),Object(D.jsx)("td",{children:e.price}),Object(D.jsx)("td",{children:Object(D.jsx)("input",{value:e.db,onChange:function(a){return function(e,n,a){e.target.value.length>3&&(e.target.value=e.target.value.slice(0,3)),isNaN(e.target.value)&&(e.target.value=1),Number(e.target.value)<1&&(e.target.value=1),e.target.value=Number(e.target.value),t(!0,n,a,e.target.value)}(a,e._id,n)}})}),Object(D.jsx)("td",{children:e.price*e.db}),Object(D.jsx)("td",{children:Object(D.jsx)("svg",{viewBox:"0 0 448 512",onClick:function(){return t(!1,e._id,n)},children:Object(D.jsx)("path",{fill:"currentColor",d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"})})})]},c)})),r=Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{colSpan:"4",style:{textAlign:"right"},children:a}),Object(D.jsx)("td",{})]});return O+=a,Object(D.jsxs)(D.Fragment,{children:[c,r]})};return Object(a.useEffect)((function(){p("pizza"),p("topping")}),[n,c]),Object(D.jsxs)("div",{className:"cartRoute",children:[Object(D.jsx)("div",{className:"title",children:Object(D.jsx)("h1",{children:"Kos\xe1r"})}),Object(D.jsxs)("div",{className:"content",children:[i.length&&Object(D.jsxs)("div",{className:"backdrop",children:[Object(D.jsx)("h2",{children:"Pizz\xe1k"}),Object(D.jsxs)("table",{children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{children:"N\xe9v"}),Object(D.jsx)("th",{children:"Egys\xe9g\xe1r"}),Object(D.jsx)("th",{children:"db"}),Object(D.jsx)("th",{children:"\xc1r"}),Object(D.jsx)("th",{})]})}),Object(D.jsx)("tbody",{children:(O=0,x(i,"pizza"))})]})]}),u.length&&Object(D.jsxs)("div",{className:"backdrop",children:[Object(D.jsx)("h2",{children:"Felt\xe9tek"}),Object(D.jsxs)("table",{children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{children:"N\xe9v"}),Object(D.jsx)("th",{children:"Egys\xe9g\xe1r"}),Object(D.jsx)("th",{children:"db"}),Object(D.jsx)("th",{children:"\xc1r"}),Object(D.jsx)("th",{})]})}),Object(D.jsx)("tbody",{children:x(u,"topping")})]})]}),Object(D.jsx)("div",{className:"backdrop",children:Object(D.jsxs)("p",{children:["\xd6sszesen fizetend\u0151: ",Object(D.jsx)("span",{className:"sum",children:O})]})})]})]})}))),K=n(16);n(18),n(85);function q(){return Object(D.jsx)("div",{className:"LoadingMask",children:Object(D.jsx)("img",{src:"loading.gif",alt:""})})}var G=Object(h.b)(null,{logout:C})((function(e){var t=e.logout,n=!0,c=Object(a.useState)(null),r=Object(b.a)(c,2),s=r[0],i=r[1],o=Object(a.useState)(!1),u=Object(b.a)(o,2),h=u[0],O=u[1],p=Object(a.useState)(!1),x=Object(b.a)(p,2),g=x[0],v=x[1],m=Object(a.useState)({name:"",email:"",password:"",password2:""}),f=Object(b.a)(m,2),z=f[0],k=f[1],N=z.name,S=z.email,C=z.password,w=z.password2,T=function(e){return k(Object(l.a)(Object(l.a)({},z),{},Object(K.a)({},e.target.name,e.target.value)))},P=function(){var e=Object(d.a)(j.a.mark((function e(){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=18;break}return a={headers:{"Content-Type":"application/json"}},e.prev=2,v(!0),e.next=6,y.a.post("/api/register",{name:N,email:S,password:C},a);case 6:c=e.sent,console.log("register action res.data: ",c.data),v(!1),O(!0),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0.response.data),v(!1),i(e.t0.response.data),t();case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return Object(D.jsx)("div",{className:"Register",children:g?Object(D.jsx)(q,{}):h?Object(D.jsx)("div",{className:"registrationSucess",children:Object(D.jsxs)("div",{className:"content",children:[Object(D.jsx)("h1",{children:"Sikeres Regiszt\xe1ci\xf3!"}),Object(D.jsx)("div",{className:"alerts",children:Object(D.jsxs)("p",{children:["Egy j\xf3v\xe1hagy\xf3 email-t k\xfcldt\xfcnk a"," ",Object(D.jsx)("span",{className:"email",children:S})," c\xedmre"]})})]})}):Object(D.jsxs)("div",{className:"content",children:[Object(D.jsx)("h1",{children:"Regisztr\xe1ci\xf3"}),Object(D.jsx)("div",{className:"alerts",children:function(){var e=[];if(n=!0,""!==N&&""!==S&&""!==C||(e.push(Object(D.jsx)("p",{children:"T\xf6lts ki minden mez\u0151t!"},e.length+1)),n=!1),C!==w&&(e.push(Object(D.jsx)("p",{children:"Jelszavak nem egyeznek!"},e.length+1)),n=!1),s&&(s.msg&&e.push(Object(D.jsx)("p",{children:s.msg},e.length+1)),s.errors)){var t,a=Object(A.a)(s.errors);try{for(a.s();!(t=a.n()).done;){var c=t.value;e.push(Object(D.jsx)("p",{children:c.msg},e.length+1))}}catch(c){a.e(c)}finally{a.f()}}return e}()}),Object(D.jsxs)("form",{children:[Object(D.jsxs)("div",{children:[Object(D.jsx)("label",{htmlFor:"name",children:"N\xe9v"}),Object(D.jsx)("input",{type:"text",name:"name",placeholder:"n\xe9v",value:N,onChange:T})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("label",{htmlFor:"email",children:"Email"}),Object(D.jsx)("input",{type:"email",name:"email",placeholder:"email@mail.hu",value:S,onChange:T})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("label",{htmlFor:"password",children:"Jelsz\xf3"}),Object(D.jsx)("input",{type:"password",name:"password",value:C,onChange:T})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("label",{htmlFor:"password2",children:"Jelsz\xf3 meger\u0151s\xedt\xe9s"}),Object(D.jsx)("input",{type:"password",name:"password2",value:w,onChange:T})]}),Object(D.jsx)("button",{type:"button",disabled:!n,onClick:P,children:"K\xfcld\xe9s"})]})]})})})),Q=Object(h.b)(null,{logout:C,setToken:w})((function(e){var t=e.logout,n=e.setToken,c=Object(a.useState)(null),r=Object(b.a)(c,2),s=r[0],i=r[1],o=Object(a.useState)(!1),h=Object(b.a)(o,2),O=h[0],p=h[1],x=Object(a.useState)({email:"",password:""}),g=Object(b.a)(x,2),v=g[0],m=g[1],f=v.email,z=v.password,k=function(e){return m(Object(l.a)(Object(l.a)({},v),{},Object(K.a)({},e.target.name,e.target.value)))},N=function(){var e=Object(d.a)(j.a.mark((function e(){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f||!z){e.next=18;break}return a={headers:{"Content-Type":"application/json"}},e.prev=2,p(!0),e.next=6,y.a.post("/api/login",v,a);case 6:c=e.sent,console.log("login res.data:",c.data),p(!1),n(c.data.token),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("login error:",e.t0.response.data),p(!1),i(e.t0.response.data),t();case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return Object(D.jsx)("div",{className:"Login",children:O?Object(D.jsx)(q,{}):Object(D.jsxs)("div",{className:"content",children:[Object(D.jsx)("h1",{children:"Bel\xe9p\xe9s"}),Object(D.jsxs)("div",{className:"alerts",children:[(!f||!z)&&Object(D.jsx)("p",{children:"T\xf6lts ki minden mez\u0151t!"}),s&&s.msg&&Object(D.jsx)("p",{children:s.msg}),s&&s.errors&&s.errors.map((function(e,t){return Object(D.jsx)("p",{children:e.msg},t)}))]}),Object(D.jsxs)("form",{children:[Object(D.jsxs)("div",{children:[Object(D.jsx)("label",{htmlFor:"email",children:"Email"}),Object(D.jsx)("input",{type:"email",name:"email",placeholder:"email@mail.hu",value:f,onChange:k})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("label",{htmlFor:"password",children:"Jelsz\xf3"}),Object(D.jsx)("input",{type:"password",name:"password",value:z,onChange:k})]}),Object(D.jsx)("button",{type:"button",disabled:!f||!z,onClick:N,children:"K\xfcld\xe9s"}),Object(D.jsx)(u.b,{to:"/forgot_password",children:"Elfelejtett jelsz\xf3"})]})]})})})),Z=Object(h.b)((function(e){return{cart:e.cart,data:e.data.data}}),{logout:C})((function(e){var t=e.logout,n=e.cart,c=e.data,r=e.history,s=!0,i=Object(a.useState)({name:"",email:"",tel:"",address:""}),o=Object(b.a)(i,2),h=o[0],O=o[1],p=Object(a.useState)(null),x=Object(b.a)(p,2),g=x[0],v=x[1],m=Object(a.useState)(!1),f=Object(b.a)(m,2),z=f[0],k=f[1],N=h.name,S=h.email,C=h.tel,w=h.address,T=function(e){return O(Object(l.a)(Object(l.a)({},h),{},Object(K.a)({},e.target.name,e.target.value)))},P=function(){var e=Object(d.a)(j.a.mark((function e(){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return a={headers:{"Content-Type":"application/json"}},e.prev=3,v(null),k(!0),e.next=8,y.a.post("/api/order",Object(l.a)(Object(l.a)({},h),{},{cart:n}),a);case 8:c=e.sent,k(!1),c.data&&!0===c.data.success?r.push("/orders"):t(),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(3),console.log("order error: ",e.t0.response.data),k(!1),v(e.t0.response.data),e.t0.response.data.msg&&e.t0.response.data.msg.includes("Authentication error")&&t();case 19:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(){return e.apply(this,arguments)}}();return Object(D.jsx)("div",{className:"Order",children:z?Object(D.jsx)(q,{}):Object(D.jsxs)("div",{className:"content",children:[Object(D.jsx)("h1",{children:"\xdaj megrendel\xe9s"}),Object(D.jsx)("div",{className:"alerts",children:function(){var e=[];if(s=!0,""!==N&&""!==S&&""!==C&&""!==w||(e.push(Object(D.jsx)("p",{children:"T\xf6lts ki minden mez\u0151t!"},e.length+1)),s=!1),Object.keys(n.pizza).length||Object.keys(n.topping).length||(e.push(Object(D.jsx)("p",{children:"A kos\xe1r \xfcres!"},e.length+1)),s=!1),g&&(g.msg&&e.push(Object(D.jsx)("p",{children:g.msg},e.length+1)),g.errors)){var t,a=Object(A.a)(g.errors);try{for(a.s();!(t=a.n()).done;){var c=t.value;e.push(Object(D.jsx)("p",{children:c.msg},e.length+1))}}catch(c){a.e(c)}finally{a.f()}}return e}()}),Object(D.jsxs)("form",{children:[Object(D.jsxs)("div",{children:[Object(D.jsx)("label",{htmlFor:"name",children:"N\xe9v"}),Object(D.jsx)("input",{type:"text",name:"name",placeholder:"n\xe9v",value:N,onChange:T})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("label",{htmlFor:"email",children:"Email"}),Object(D.jsx)("input",{type:"email",name:"email",placeholder:"email@mail.hu",value:S,onChange:T})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("label",{htmlFor:"tel",children:"Telefon"}),Object(D.jsx)("input",{type:"tel",name:"tel",placeholder:"06201234567",value:C,onChange:T})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("label",{htmlFor:"address",children:"C\xedm"}),Object(D.jsx)("input",{type:"text",name:"address",placeholder:"1234 V\xe1ros, Utca n\xe9v 1",value:w,onChange:T})]}),Object(D.jsx)("div",{className:"cart",children:Object(D.jsxs)(u.b,{to:"/cart",children:[Object(D.jsx)("svg",{id:"cart",viewBox:"0 0 576 512",children:Object(D.jsx)("path",{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"})}),Object(D.jsxs)("span",{children:["\xd6sszeg: ",I(n,c)," Ft"]})]})}),Object(D.jsx)("button",{type:"button",disabled:!s,onClick:P,children:"K\xfcld\xe9s"})]})]})})})),X=(n(86),n(87),function(e){var t=e.order,n=0,a=function(e){var a=0,c=t.cart[e].map((function(e,t){return a+=e.quantity*e.price,Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:e.name}),Object(D.jsx)("td",{children:e.price}),Object(D.jsx)("td",{children:e.quantity}),Object(D.jsx)("td",{children:e.quantity*e.price})]},t)}));return c.push(Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{colSpan:"3"}),Object(D.jsx)("td",{children:a})]},t.cart[e].length)),n+=a,c};return Object(D.jsxs)("div",{className:"OrderCard",children:[Object(D.jsx)("div",{className:"personalData",children:Object(D.jsx)("table",{children:Object(D.jsxs)("tbody",{children:[Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:"N\xe9v: "}),Object(D.jsx)("td",{children:t.name})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:"C\xedm: "}),Object(D.jsx)("td",{children:t.address})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:"Email: "}),Object(D.jsx)("td",{children:t.email})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:"Tel: "}),Object(D.jsx)("td",{children:t.tel})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:"D\xe1tum: "}),Object(D.jsx)("td",{children:new Date(t.date).toLocaleString()})]})]})})}),Object(D.jsxs)("div",{className:"cart",children:[t.cart.pizza&&t.cart.pizza.length?Object(D.jsxs)("div",{children:[Object(D.jsx)("h2",{children:"Pizz\xe1k"}),Object(D.jsxs)("table",{children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{children:"N\xe9v"}),Object(D.jsx)("th",{children:"Egys\xe9g\xe1r"}),Object(D.jsx)("th",{children:"db"}),Object(D.jsx)("th",{children:"\xc1r"})]})}),Object(D.jsx)("tbody",{children:(n=0,a("pizza"))})]})]}):Object(D.jsx)("p",{children:"Nincsenek pizz\xe1k!"}),t.cart.topping&&t.cart.topping.length?Object(D.jsxs)("div",{children:[Object(D.jsx)("h2",{children:"Felt\xe9tek"}),Object(D.jsxs)("table",{children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{children:"N\xe9v"}),Object(D.jsx)("th",{children:"Egys\xe9g\xe1r"}),Object(D.jsx)("th",{children:"db"}),Object(D.jsx)("th",{children:"\xc1r"})]})}),Object(D.jsx)("tbody",{children:a("topping")})]})]}):Object(D.jsx)("p",{children:"Nincsenek felt\xe9tek!"})]}),Object(D.jsxs)("div",{className:"totalSum",children:["\xd6sszesen: ",n," Ft."]})]})}),W=Object(h.b)(null,{logout:C})((function(e){var t=e.logout,n=Object(a.useState)([]),c=Object(b.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(!1),l=Object(b.a)(i,2),o=l[0],u=l[1];return Object(a.useEffect)((function(){(function(){var e=Object(d.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,y.a.get("/api/orders");case 4:n=e.sent,u(!1),console.log("orders: ",n.data),s(n.data),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),u(!1),console.log(e.t0.response.data),t();case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(D.jsx)("div",{className:"Orders",children:o?Object(D.jsx)(q,{}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"title",children:Object(D.jsx)("h1",{children:"Megrendel\xe9sek"})}),Object(D.jsx)("div",{className:"content",children:r.length?r.map((function(e,t){return Object(D.jsx)(X,{order:e},t)})):Object(D.jsx)("p",{className:"info",children:"Nincsenek megrendel\xe9sek"})})]})})}));var Y=Object(h.b)(null,{setToken:w,logout:C})((function(e){var t=e.setToken,n=e.logout,c=new URLSearchParams(Object(i.h)().search),r=Object(i.g)(),s=Object(a.useState)(!1),l=Object(b.a)(s,2),o=l[0],u=l[1],h=Object(a.useState)(null),O=Object(b.a)(h,2),p=O[0],x=O[1];return Object(a.useEffect)((function(){(function(){var e=Object(d.a)(j.a.mark((function e(a){var s,i,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.get("code"),e.prev=1,u(!0),i={headers:{"Content-Type":"application/json"}},e.next=6,y.a.post("/api/google",{code:s},i);case 6:l=e.sent,console.log("google callback /api/google res.data:",l.data),u(!1),t(l.data.token),r.push("/"),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("google callback /api/google error:",e.t0.response.data),x(e.t0.response.data),u(!1),n();case 19:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}})()()}),[]),Object(D.jsx)("div",{className:"Callback",children:o?Object(D.jsx)(q,{}):Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)("div",{className:"content",children:[Object(D.jsx)("h1",{children:"Google bel\xe9p\xe9s!"}),Object(D.jsxs)("div",{className:"alerts",children:[p&&p.msg&&Object(D.jsx)("p",{children:p.msg}),p&&p.errors&&p.errors.map((function(e,t){return Object(D.jsx)("p",{children:e.msg},t)})),!p&&Object(D.jsx)("p",{children:"A bel\xe9p\xe9s sikeres!"})]})]})})})}));var $=Object(h.b)(null,{logout:C,setToken:w})((function(e){var t=e.logout,n=e.setToken,c=new URLSearchParams(Object(i.h)().search),r=Object(i.g)(),s=Object(a.useState)(!1),l=Object(b.a)(s,2),o=l[0],u=l[1],h=Object(a.useState)(null),O=Object(b.a)(h,2),p=O[0],x=O[1];return Object(a.useEffect)((function(){(function(){var e=Object(d.a)(j.a.mark((function e(){var a,s,i,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.get("email"),s=c.get("code"),e.prev=2,u(!0),i={headers:{"Content-Type":"application/json"}},e.next=7,y.a.post("/api/confirm",{email:a,code:s},i);case 7:l=e.sent,console.log("confirm res.data: ",l.data),u(!1),n(l.data.token),r.push("/"),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(2),console.log("confirm error.response.data: ",e.t0.response.data),u(!1),x(e.t0.response.data),t();case 20:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(D.jsx)("div",{className:"Confirm",children:o?Object(D.jsx)(q,{}):Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)("div",{className:"content",children:[Object(D.jsx)("h1",{children:"Regisztr\xe1ci\xf3 meger\u0151s\xedt\xe9s!"}),Object(D.jsxs)("div",{className:"alerts",children:[p&&p.msg&&Object(D.jsx)("p",{children:p.msg}),p&&p.errors&&p.errors.map((function(e,t){return Object(D.jsx)("p",{children:e.msg},t)})),!p&&Object(D.jsx)("p",{children:"A regisztr\xe1ci\xf3d meger\u0151s\xedt\xe9sre ker\xfclt!"})]})]})})})}));function ee(){var e=new URLSearchParams(Object(i.h)().search),t=Object(i.g)(),n=Object(a.useState)(""),c=Object(b.a)(n,2),r=c[0],s=c[1],l=Object(a.useState)(""),o=Object(b.a)(l,2),u=o[0],h=o[1],O=Object(a.useState)(!1),p=Object(b.a)(O,2),x=p[0],g=p[1],v=Object(a.useState)(!1),m=Object(b.a)(v,2),f=m[0],z=m[1];return Object(D.jsx)("div",{className:"PasswordReset",children:f?Object(D.jsx)(q,{}):x?Object(D.jsx)("div",{className:"content",children:Object(D.jsx)("div",{className:"alerts",children:Object(D.jsx)("p",{children:"Az \xfaj jelsz\xf3 be\xe1ll\xedt\xe1sra ker\xfclt"})})}):Object(D.jsxs)("div",{className:"content",children:[Object(D.jsx)("h1",{children:"Add meg az \xfaj jelszavad!"}),Object(D.jsxs)("div",{className:"alerts",children:[!r&&Object(D.jsx)("p",{children:"T\xf6lts ki minden mez\u0151t!"}),u&&u.msg&&Object(D.jsx)("p",{children:u.msg}),u&&u.errors&&u.errors.map((function(e,t){return Object(D.jsx)("p",{children:e.msg},t)}))]}),Object(D.jsxs)("form",{children:[Object(D.jsxs)("div",{children:[Object(D.jsx)("label",{htmlFor:"password",children:"jelsz\xf3"}),Object(D.jsx)("input",{type:"password",name:"password",value:r,onChange:function(e){return s(e.target.value)}})]}),Object(D.jsx)("button",{type:"button",disabled:!r,onClick:function(){r&&function(){var n=Object(d.a)(j.a.mark((function n(a){var c;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={headers:{"Content-Type":"application/json"}},n.prev=1,z(!0),n.next=5,y.a.post("/api/password",{email:e.get("email"),code:e.get("code"),password:r},c);case 5:z(!1),g(!0),setTimeout((function(){t.push("/login")}),1e3),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),z(!1),h(n.t0.response.data);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}()()},children:"K\xfcld\xe9s"})]})]})})}function te(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(b.a)(r,2),i=s[0],l=s[1],o=Object(a.useState)(!1),u=Object(b.a)(o,2),h=u[0],O=u[1],p=Object(a.useState)(!1),x=Object(b.a)(p,2),g=x[0],v=x[1];return Object(D.jsx)("div",{className:"ForgotPassword",children:g?Object(D.jsx)(q,{}):h?Object(D.jsx)("div",{className:"content",children:Object(D.jsx)("div",{className:"alerts",children:Object(D.jsxs)("p",{children:["Egy jelsz\xf3 helyre\xe1ll\xedt\xf3 email-t k\xfcldt\xfcnk a"," ",Object(D.jsx)("span",{className:"email",children:n})," c\xedmre"]})})}):Object(D.jsxs)("div",{className:"content",children:[Object(D.jsx)("h1",{children:"Add meg melyik email c\xedmhez szeretn\xe9l \xfaj jelsz\xf3t!"}),Object(D.jsxs)("div",{className:"alerts",children:[!n&&Object(D.jsx)("p",{children:"T\xf6lts ki minden mez\u0151t!"}),i&&i.msg&&Object(D.jsx)("p",{children:i.msg}),i&&i.errors&&i.errors.map((function(e,t){return Object(D.jsx)("p",{children:e.msg},t)}))]}),Object(D.jsxs)("form",{children:[Object(D.jsxs)("div",{children:[Object(D.jsx)("label",{htmlFor:"email",children:"Email"}),Object(D.jsx)("input",{type:"email",name:"email",value:n,onChange:function(e){return c(e.target.value)}})]}),Object(D.jsx)("button",{type:"button",disabled:!n,onClick:function(){n&&function(){var e=Object(d.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,v(!0),e.next=5,y.a.post("/api/reset",{email:n},a);case 5:O(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l(e.t0.response.data);case 11:return e.prev=11,v(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()()},children:"K\xfcld\xe9s"})]})]})})}n(88),n(89);var ne=c.a.createContext({}),ae=Object(h.b)((function(e){return{user:e.auth.user}}),null)((function(e){for(var t=e.user,n=Object(a.useContext)(ne),c=n.dateStrings,r=n.bookings,s=n.addProps,i=n.intervalCorrectionBasedOnTimeZone,l=n.sendToServer,o=n.setSelectedTableNumber,j=[],d=0;d<60;d+=15)j.push(Object(D.jsx)("option",{value:d,children:d},d));for(var u=[],h=0;h<24;h++)u.push(Object(D.jsx)("option",{value:h,children:h},h));var O=c.map((function(e,t){return Object(D.jsx)("option",{value:t,children:e},t)})),p=Object(a.useState)(0),x=Object(b.a)(p,2),g=x[0],v=x[1],m=Object(a.useState)(0),f=Object(b.a)(m,2),z=f[0],k=f[1],y=Object(a.useState)(0),N=Object(b.a)(y,2),S=N[0],C=N[1],w=Object(a.useState)(0),T=Object(b.a)(w,2),P=T[0],I=T[1],M=Object(a.useState)(0),E=Object(b.a)(M,2),F=E[0],B=E[1],H=Object(a.useState)(0),_=Object(b.a)(H,2),L=_[0],R=_[1],U=Object(a.useState)(""),V=Object(b.a)(U,2),J=V[0],K=V[1];return Object(D.jsxs)("div",{className:"DateBooking",children:[Object(D.jsx)("h1",{children:"Id\u0151pont foglal\xe1s"}),Object(D.jsx)("table",{children:Object(D.jsxs)("tbody",{children:[Object(D.jsx)("tr",{children:Object(D.jsx)("td",{colSpan:"3",children:Object(D.jsx)("div",{className:"start",children:"Kezd\xe9s"})})}),Object(D.jsxs)("tr",{children:[Object(D.jsxs)("td",{children:["Nap:",Object(D.jsx)("select",{onChange:function(e){K(""),v(parseInt(e.target.value))},children:O})]}),Object(D.jsxs)("td",{children:[Object(D.jsx)("span",{className:"time",children:"\xd3ra:"}),Object(D.jsx)("select",{onChange:function(e){K(""),C(parseInt(e.target.value))},children:u})]}),Object(D.jsxs)("td",{children:[Object(D.jsx)("span",{className:"time",children:"Perc:"}),Object(D.jsx)("select",{onChange:function(e){K(""),I(parseInt(e.target.value))},children:j})]})]}),Object(D.jsx)("tr",{children:Object(D.jsx)("td",{colSpan:"3",children:Object(D.jsx)("div",{className:"end",children:"V\xe9ge"})})}),Object(D.jsxs)("tr",{children:[Object(D.jsxs)("td",{children:["Nap:",Object(D.jsx)("select",{onChange:function(e){K(""),k(parseInt(e.target.value))},children:O})]}),Object(D.jsxs)("td",{children:[Object(D.jsx)("span",{className:"time",children:"\xd3ra:"}),Object(D.jsxs)("select",{onChange:function(e){K(""),B(parseInt(e.target.value))},children:[u,Object(D.jsx)("option",{value:24,children:24})]})]}),Object(D.jsxs)("td",{children:[Object(D.jsx)("span",{className:"time",children:"Perc:"}),Object(D.jsx)("select",{onChange:function(e){K(""),R(parseInt(e.target.value))},children:24===parseInt(F)?Object(D.jsx)("option",{value:0,children:"0"}):j})]})]})]})}),Object(D.jsx)("button",{onClick:function(){var e={};if(g===z){for(var n=[],a=4*S+Math.floor(P/15);a<4*F+Math.floor(L/15);a++)n.push(a);n.length&&s(e,[c[g]],n)}else if(z>g){if(z-g>1){for(var j=[],d=0;d<96;d++)j.push(d);for(var u=g+1;u<z;u++)s(e,[c[u]],j)}for(var h=[],O=4*S+Math.floor(P/15);O<96;O++)h.push(O);h.length&&s(e,[c[g]],h);for(var p=[],x=0;x<4*F+Math.floor(L/15);x++)p.push(x);p.length&&s(e,[c[z]],p)}var v=function(e){if(!Object.keys(e).length)return!1;for(var n=1;n<11;n++){var a=!0;for(var c in e){if(!a)break;var s,i=Object(A.a)(e[c]);try{for(i.s();!(s=i.n()).done;){var l,o,j,d,b,u,h=s.value;if(!a)break;(null===r||void 0===r||null===(l=r[n])||void 0===l||null===(o=l[c])||void 0===o?void 0:o[h])&&"x"!==(null===r||void 0===r||null===(j=r[n])||void 0===j||null===(d=j[c])||void 0===d?void 0:d[h])&&(null===r||void 0===r||null===(b=r[n])||void 0===b||null===(u=b[c])||void 0===u?void 0:u[h])!==t.email&&(a=!1)}}catch(O){i.e(O)}finally{i.f()}}if(a)return n}return!1}(e);v?(!function(e,t){var n={};for(var a in e){var c,r=Object(A.a)(e[a]);try{for(r.s();!(c=r.n()).done;){var j,d=c.value,u=i(parseInt(d),a,!0),h=Object(b.a)(u,2),O=h[0],p=h[1];(null===n||void 0===n||null===(j=n[t])||void 0===j?void 0:j[O])?n[t][O].push(p):s(n,[t,O],[p])}}catch(x){r.e(x)}finally{r.f()}}l(n),o(t)}(e,v),K("Van szabad asztal. Az asztal sz\xe1ma: ".concat(v))):K("Nincs szabad asztal erre az id\u0151pontra!")},children:"Foglal\xe1s"}),J&&Object(D.jsx)("p",{children:J})]})}));function ce(){var e=Object(a.useContext)(ne),t=e.selectedTableNumber,n=e.setSelectedTableNumber;return Object(D.jsxs)("div",{className:"dashBoard",children:[Object(D.jsx)("button",{onClick:function(e){return n((function(e){return(parseInt(e)-1>=0?parseInt(e)-1:10).toString()}))},children:"-"}),Object(D.jsxs)("select",{onChange:function(e){return n(e.target.value)},value:t,children:[Object(D.jsx)("option",{value:"0",children:"Id\u0151pont foglal\xe1s"}),Object(D.jsx)("option",{value:"1",children:"1. asztal"}),Object(D.jsx)("option",{value:"2",children:"2. asztal"}),Object(D.jsx)("option",{value:"3",children:"3. asztal"}),Object(D.jsx)("option",{value:"4",children:"4. asztal"}),Object(D.jsx)("option",{value:"5",children:"5. asztal"}),Object(D.jsx)("option",{value:"6",children:"6. asztal"}),Object(D.jsx)("option",{value:"7",children:"7. asztal"}),Object(D.jsx)("option",{value:"8",children:"8. asztal"}),Object(D.jsx)("option",{value:"9",children:"9. asztal"}),Object(D.jsx)("option",{value:"10",children:"10. asztal"})]}),Object(D.jsx)("button",{onClick:function(e){return n((function(e){return(parseInt(e)+1<11?parseInt(e)+1:0).toString()}))},children:"+"})]})}var re=Object(h.b)((function(e){return{user:e.auth.user}}),null)((function(e){var t,n=e.index,a=e.twoHours,c=e.bookingMatrix,r=e.changeBookingState,s=e.date,i=e.user,l=2*a+Math.floor(15*n/60),o=15*n-60*Math.floor(15*n/60),j=(null===c||void 0===c||null===(t=c[s])||void 0===t?void 0:t[n+8*a])||!1;return Object(D.jsx)("tr",{onClick:function(){j&&"x"!==j||r("x"!==j&&"x",s,n+8*a)},children:Object(D.jsx)("td",{style:{backgroundColor:"x"===j?"gray":j===i.email?"orange":j?"#e96767":"#7aeb34"},children:Object(D.jsxs)("span",{className:"hoursInContent",children:[l<10?"0".concat(l):l," : ",o||"00"]})})})}));function se(e){return Object(D.jsx)("table",{className:"ContentTable",children:Object(D.jsx)("tbody",{children:function(){for(var t=[],n=0;n<8;n++)t.push(Object(D.jsx)(re,Object(l.a)({index:n},e),n));return t}()})})}function ie(e){var t=Object(a.useState)(!1),n=Object(b.a)(t,2),c=n[0],r=n[1];return Object(D.jsxs)("div",{className:"Td",children:[Object(D.jsx)("div",{className:"cover",onClick:function(e){return r(!0)}}),c&&Object(D.jsxs)("div",{className:"overlay",children:[Object(D.jsx)("h1",{children:e.date}),e.unsavedChanges&&Object(D.jsx)("button",{className:"booking",onClick:e.sendBooking,children:"Lefoglalom"}),Object(D.jsx)("span",{className:"close",onClick:function(e){return r(!1)},children:"X"}),Object(D.jsx)(se,Object(l.a)({},e))]}),Object(D.jsx)(se,Object(l.a)({},e))]})}function le(){var e=Object(a.useContext)(ne),t=e.firstDayIndex,n=e.dateStrings,c=e.days,r=e.bookings,s=e.selectedTableNumber,i=e.changeBookingState,l=e.send,o=e.unsavedChanges;return Object(D.jsxs)("table",{className:"BookingTable",children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{className:"hours"}),function(){for(var e=[],a=t,r=0;r<7;a++,r++)e.push(Object(D.jsxs)("th",{children:[n[r],Object(D.jsx)("br",{}),"(",c[a],")"]},r)),6===a&&(a=-1);return e}()]})}),Object(D.jsx)("tbody",{children:function(){for(var e=[],t=0;t<12;t++){for(var a=[],c=0;c<7;c++)a.push(Object(D.jsx)("td",{children:Object(D.jsx)(ie,{date:n[c],twoHours:t,bookingMatrix:null===r||void 0===r?void 0:r[s],changeBookingState:i,sendBooking:l,unsavedChanges:o})},c));var j=2*t;a.unshift(Object(D.jsx)("td",{className:"hours",children:Object(D.jsxs)("span",{children:[j<10?"0".concat(j):j," : 00"]})},"7")),e.push(Object(D.jsx)("tr",{children:a},t))}return e}()})]})}var oe=Object(h.b)(null,{logout:C})((function(e){var t=e.logout,n=Object(a.useState)([]),c=Object(b.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(0),o=Object(b.a)(i,2),u=o[0],h=o[1],O=Object(a.useState)(0),p=Object(b.a)(O,2),x=p[0],g=p[1],v=Object(a.useState)({}),m=Object(b.a)(v,2),f=m[0],z=m[1],k=Object(a.useState)(!1),N=Object(b.a)(k,2),S=N[0],C=N[1],w=Object(a.useState)(!1),T=Object(b.a)(w,2),P=T[0],I=T[1],M=Object(a.useState)(""),A=Object(b.a)(M,2),E=A[0],F=A[1],B=Object(a.useState)(""),H=Object(b.a)(B,2),_=H[0],L=H[1],R=Object(a.useState)([]),U=Object(b.a)(R,2),V=U[0],J=U[1],K=function(){for(var e=[],t=1;t<=7;t++){var n=6e4*(new Date).getTimezoneOffset(),a=Date.now()+24*t*60*60*1e3,c=new Date(a-n).toISOString().slice(0,10);e.push(c),1===t&&h(new Date(a).getDay())}s(e)},G=function e(t,n,a){"string"==typeof n&&(n=n.split(".")),t[n[0]]=t[n[0]]||{};var c=t[n[0]];return n.length>1?(n.shift(),e(c,n,a)):t[n[0]]=a,t},Q=function(e,t,n){var a=Math.round((new Date).getTimezoneOffset()/15),c=e,r=t;return(c=n?e+a:e-a)<0?(r=new Date(new Date(t).getTime()-864e5).toISOString().slice(0,10),c=96+c):c>95&&(r=new Date(new Date(t).getTime()+864e5).toISOString().slice(0,10),c-=96),[r,c]},Z=function(e){var t={};for(var n in e)for(var a in e[n])for(var c in e[n][a]){var r=Q(parseInt(c),a,!1),s=Object(b.a)(r,2),i=s[0],l=s[1];G(t,[n,i,l],e[n][a][c])}return t},X=function(){var e=Object(d.a)(j.a.mark((function e(n){var a,c,r,s,i,l,o,d,b,u,h,O;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,I(!0),e.next=5,y.a.post("/api/bookings",{data:n},a);case 5:r=e.sent,z(Z((null===r||void 0===r||null===(c=r.data)||void 0===c?void 0:c.data)||{})),L("Sikeres foglal\xe1s!"),C(!1),I(!1),e.next=19;break;case 12:e.prev=12,e.t0=e.catch(1),I(!1),(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.errors)&&J(e.t0.response.data.errors),(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.msg)&&F(e.t0.response.data.msg),(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d||null===(b=d.data)||void 0===b?void 0:b.data)&&z(Z(e.t0.response.data.data)),(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u||null===(h=u.data)||void 0===h||null===(O=h.msg)||void 0===O?void 0:O.includes("Authentication error"))&&t();case 19:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){(function(){var e=Object(d.a)(j.a.mark((function e(){var t,n,a,c,r,s,i,l,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t={},f)for(a in f[n])for(c in f[n][a])"x"===f[n][a][c]&&(s=Q(parseInt(c),a,!0),i=Object(b.a)(s,2),l=i[0],o=i[1],(null===t||void 0===t||null===(r=t[n])||void 0===r?void 0:r[l])?t[n][l].push(o):G(t,[n,l],[o]));return e.next=4,X(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()};return Object(a.useEffect)((function(){(function(){var e=Object(d.a)(j.a.mark((function e(){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(),e.prev=1,I(!0),e.next=5,y.a.get("/api/bookings");case 5:a=e.sent,I(!1),z(Z((null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.data)||{})),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0.response.data),I(!1),t();case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(D.jsxs)("div",{className:"BookingContainer",children:[_&&Object(D.jsx)("div",{className:"Message",onClick:function(e){return L("")},children:_}),E&&Object(D.jsx)("div",{className:"Error",onClick:function(e){return F("")},children:E}),V.length&&Object(D.jsx)("div",{className:"Error",onClick:function(e){return J([])},children:V.map((function(e,t){return Object(D.jsx)("p",{children:e.msg},t)}))}),Object(D.jsxs)("div",{className:"Booking",children:[P&&Object(D.jsx)(q,{}),S&&parseInt(x)&&Object(D.jsx)("button",{className:"booking",onClick:W,children:"Foglal\xe1s k\xfcld\xe9se"}),Object(D.jsxs)(ne.Provider,{value:{selectedTableNumber:x,setSelectedTableNumber:g,firstDayIndex:u,dateStrings:r,days:["Vas\xe1rnap","H\xe9tf\u0151","Kedd","Szerda","Cs\xfct\xf6rt\xf6k","P\xe9ntek","Szombat"],bookings:f,changeBookingState:function(e,t,n){var a=Object(l.a)({},f);e?G(a,[x,t,n],e):delete a[x][t][n];var c=!1;for(var r in a)if(Object.keys(a[r]).length)for(var s in a[r])if(Object.keys(a[r][s]).length)for(var i in a[r][s])"x"===a[r][s][i]&&(c=!0);else delete a[r][s];else delete a[r];C(c),z(a)},send:W,unsavedChanges:S,addProps:G,intervalCorrectionBasedOnTimeZone:Q,sendToServer:X},children:[Object(D.jsx)(ce,{}),parseInt(x)?Object(D.jsx)(le,{}):Object(D.jsx)(ae,{})]})]})]})}));n(90),n(91);function je(e){var t=e.tableNumber,n=e.start,a=e.end,c=["Vas\xe1rnap","H\xe9tf\u0151","Kedd","Szerda","Cs\xfct\xf6rt\xf6k","P\xe9ntek","Szombat"];return Object(D.jsxs)("div",{className:"BookingCardContainer",children:[Object(D.jsxs)("div",{className:"BookingCard",children:[Object(D.jsxs)("p",{children:["Foglal\xe1s a ",t," sz\xe1m\xfa asztaln\xe1l"]}),Object(D.jsxs)("p",{children:[new Date(n).toLocaleDateString()," ",c[new Date(n).getDay()],Object(D.jsx)("br",{}),new Date(n).toLocaleTimeString()," -t\xf3l"]}),Object(D.jsxs)("p",{children:[new Date(a).toLocaleDateString(),Object(D.jsx)("br",{}),c[new Date(a).getDay()],Object(D.jsx)("br",{}),new Date(a).toLocaleTimeString()," -ig"]})]}),Object(D.jsx)("div",{className:"shadow"})]})}var de=Object(h.b)(null,{logout:C})((function(e){var t=e.logout,n=Object(a.useState)([]),c=Object(b.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(!1),l=Object(b.a)(i,2),o=l[0],u=l[1],h=Object(a.useState)(!0),O=Object(b.a)(h,2),p=O[0],x=O[1],g=Object(a.useState)(!0),v=Object(b.a)(g,2),m=v[0],f=v[1];return Object(a.useEffect)((function(){(function(){var e=Object(d.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,y.a.get("/api/user_bookings");case 4:n=e.sent,u(!1),s(n.data.userBookingsArray),console.log("user bookings: ",n.data),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),u(!1),console.log("user bookings error: ",e.t0),t();case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(D.jsx)("div",{className:"UserBookings",children:o?Object(D.jsx)(q,{}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"title",children:Object(D.jsx)("h1",{children:"Asztalfoglal\xe1sok"})}),Object(D.jsxs)("div",{className:"dashboard",children:[Object(D.jsxs)("select",{name:"dateOrTable",id:"dateOrTable",onChange:function(e){f(e.target.value)},children:[Object(D.jsx)("option",{value:"1",children:"d\xe1tum"}),Object(D.jsx)("option",{value:"",children:"asztal"})]}),Object(D.jsxs)("div",{className:"checkboxContainer",children:[Object(D.jsx)("input",{type:"checkbox",name:"incDec",id:"incDec",onChange:function(e){x(!e.target.checked)}}),Object(D.jsxs)("label",{htmlFor:"incDec",children:[Object(D.jsx)("svg",{viewBox:"0 0 512 512",children:Object(D.jsx)("path",{d:"M304 416h-64a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h48v304a16 16 0 0 0 16 16h32a16 16 0 0 0 16-16V160h48c14.21 0 21.38-17.24 11.31-27.31l-80-96a16 16 0 0 0-22.62 0l-80 96C-5.35 142.74 1.77 160 16 160zm416 0H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h192a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm-64 128H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM496 32H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h256a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"})}),Object(D.jsx)("svg",{viewBox:"0 0 512 512",children:Object(D.jsx)("path",{d:"M240 96h64a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16h-64a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16zm0 128h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16zm256 192H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h256a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm-256-64h192a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16zM16 160h48v304a16 16 0 0 0 16 16h32a16 16 0 0 0 16-16V160h48c14.21 0 21.39-17.24 11.31-27.31l-80-96a16 16 0 0 0-22.62 0l-80 96C-5.35 142.74 1.78 160 16 160z"})})]})]})]}),Object(D.jsx)("div",{className:"content",children:r.length?r.sort(function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(c,r){var s=n?new Date(c.start):Number(c.tableNumber),i=n?new Date(r.start):Number(r.tableNumber);return s<i?t?-1:1:i<s?t?1:-1:s===i?a?0:e(t,!n,!0)(c,r):void 0}}(p,m)).map((function(e,t){return Object(D.jsx)(je,{tableNumber:e.tableNumber,start:e.start,end:e.end},t)})):Object(D.jsx)("p",{className:"info",children:"Nincsenek asztalfoglal\xe1sok!"})})]})})})),be=n(25),ue=["isAuthenticated","loading","component"],he=Object(h.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,loading:e.auth.loading}}))((function(e){var t=e.isAuthenticated,n=e.loading,a=e.component,c=Object(be.a)(e,ue);return Object(D.jsx)(i.b,Object(l.a)(Object(l.a)({},c),{},{render:function(e){return n?Object(D.jsx)(q,{}):t?Object(D.jsx)(a,Object(l.a)({},e)):Object(D.jsx)(i.a,{to:"/login"})}}))})),Oe=["isAuthenticated","loading","component"],pe=Object(h.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,loading:e.auth.loading}}))((function(e){var t=e.isAuthenticated,n=e.loading,a=e.component,c=Object(be.a)(e,Oe);return Object(D.jsx)(i.b,Object(l.a)(Object(l.a)({},c),{},{render:function(e){return n?Object(D.jsx)(q,{}):t?Object(D.jsx)(i.a,{to:"/"}):Object(D.jsx)(a,Object(l.a)({},e))}}))}));n(92),n(93);function xe(e){var t=e.change,n=Object(a.useRef)(),c=Object(a.useState)(""),r=Object(b.a)(c,2),s=r[0],i=r[1],l=Object(a.useState)(""),o=Object(b.a)(l,2),j=o[0],d=o[1];return Object(D.jsxs)("div",{className:"FileInput",children:[Object(D.jsxs)("button",{type:"button",onClick:function(){n.current.click()},children:[Object(D.jsx)("input",{name:"photo",type:"file",ref:n,onChange:function(e){var n,a;(i(""),d(""),null===(n=e.target)||void 0===n?void 0:n.files[0])&&(a=e.target.files[0],console.log(a),-1===["image/jpeg","image/png","image/gif"].indexOf(a.type)||a.size>1e7?i("A k\xe9p m\xe9rete vagy t\xedpusa nem megfelel\u0151!"):(d(e.target.files[0].name),t(e)))}}),"\xdaj f\xe9nyk\xe9p"]}),s&&Object(D.jsx)("p",{className:"error",children:s}),j&&Object(D.jsx)("p",{className:"info",children:j})]})}var ge=Object(h.b)((function(e){return{user:e.auth.user}}),{setUser:T,logout:C})((function(e){var t=e.user,n=e.setUser,c=e.logout,r=Object(a.useRef)(),s=Object(a.useState)({}),i=Object(b.a)(s,2),o=i[0],u=i[1],h=Object(a.useState)(!0),O=Object(b.a)(h,2),p=O[0],x=O[1],g=Object(a.useState)(!1),v=Object(b.a)(g,2),m=v[0],f=v[1],z=Object(a.useState)(null),k=Object(b.a)(z,2),N=k[0],S=k[1],C=Object(a.useState)(""),w=Object(b.a)(C,2),T=w[0],P=w[1],I=Object(a.useState)([]),M=Object(b.a)(I,2),A=M[0],E=M[1],F=function(e){P(""),E([]),x(r.current.checkValidity()),"photo"===e.target.name?S(e.target.files[0]):u(Object(l.a)(Object(l.a)({},o),{},Object(K.a)({},e.target.name,e.target.value)))},B=function(){var e=Object(d.a)(j.a.mark((function e(t){var a,r,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(""),E([]),(a=new FormData).append("userfile",N),a.append("data",JSON.stringify(Object(l.a)({},o))),f(!0),e.prev=6,e.next=9,y.a.post("/api/update_profile",a);case 9:r=e.sent,n(r.data),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0.response.data),(null===(s=e.t0.response.data)||void 0===s?void 0:s.msg)?e.t0.response.data.msg.includes("Authentication error")?c():P(e.t0.response.data.msg):(null===(i=e.t0.response.data)||void 0===i?void 0:i.errors)&&E(e.t0.response.data.errors);case 17:f(!1),u({}),S(null);case 20:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)("div",{className:"Profile",children:[m&&Object(D.jsx)(q,{}),Object(D.jsxs)("div",{className:"content",children:[Object(D.jsx)("h1",{children:"Fi\xf3k"}),Object(D.jsxs)("form",{action:"",ref:r,children:[Object(D.jsx)("div",{className:"image",children:Object(D.jsx)("img",{src:t.photo,alt:""})}),Object(D.jsxs)("div",{className:"inputs",children:[Object(D.jsx)("input",{type:"text",name:"name",placeholder:"n\xe9v",required:!0,value:t.name,onChange:function(e){n(Object(l.a)(Object(l.a)({},t),{},{name:e.target.value})),F(e)}}),Object(D.jsx)(xe,{change:F}),Object(D.jsx)("button",{type:"button",disabled:!p||!N&&!Object.keys(o).length,onClick:B,children:"Adatok friss\xedt\xe9se"}),T&&Object(D.jsx)("p",{className:"error",children:T}),A&&A.map((function(e){return Object(D.jsx)("p",{className:"error",children:e.msg})}))]})]})]})]})})),ve=Object(h.b)((function(e){return{loadingData:e.data.loading}}),{setData:function(){return function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y()("/api/data");case 3:n=e.sent,t({type:g,payload:n.data}),t({type:z,payload:{pizza:n.data.pizza.map((function(e){return e._id.toString()})),topping:n.data.topping.map((function(e){return e._id.toString()}))}}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("getting pizza data error: ",e.t0),t({type:g,payload:{pizza:[],topping:[]}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},loadUser:function(){return function(){var e=Object(d.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=localStorage.token)&&N(n),e.prev=2,e.next=5,y.a.get("/api/loaduser");case 5:a=e.sent,t({type:O,payload:{token:n,user:a.data}}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("auth actions load user error:",e.t0),t({type:p});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.loadingData,n=e.setData,c=e.loadUser,r=Object(i.h)();return Object(a.useEffect)((function(){console.log("app.js location.pathname: ",r.pathname),n(),"/confirm"!==r.pathname&&"/callback"!==r.pathname&&c()}),[]),Object(D.jsxs)("div",{className:"App",style:{backgroundImage:'url("background.svg")',backgroundSize:"contain"},children:[Object(D.jsx)(M,{}),Object(D.jsxs)(i.d,{children:[Object(D.jsx)(pe,{path:"/register",component:G}),Object(D.jsx)(pe,{path:"/login",component:Q}),Object(D.jsx)(he,{path:"/order",component:Z}),Object(D.jsx)(he,{path:"/orders",component:W}),Object(D.jsx)(he,{path:"/booking",component:oe}),Object(D.jsx)(he,{path:"/bookings",component:de}),Object(D.jsx)(he,{path:"/profile",component:ge}),Object(D.jsx)(i.b,{path:"/confirm",component:$}),Object(D.jsx)(i.b,{path:"/callback",component:Y}),Object(D.jsx)(i.b,{path:"/password_reset",component:ee}),Object(D.jsx)(i.b,{path:"/forgot_password",component:te}),Object(D.jsx)(i.b,{path:"/cart",children:t?Object(D.jsx)(q,{}):Object(D.jsx)(J,{})}),Object(D.jsx)(i.b,{exact:!0,path:"/",children:t?Object(D.jsx)(q,{}):Object(D.jsx)(V,{})}),Object(D.jsx)(i.a,{to:"/"})]})]})})),me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,95)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},fe=n(21),ze=n(41),ke=n(42),ye={token:localStorage.getItem("token"),isAuthenticated:!1,loading:!0,user:null},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(l.a)(Object(l.a)({},e),{},{user:{name:t.payload.name,photo:t.payload.photo+"?time="+Date.now(),email:t.payload.email},loading:!1});case O:return localStorage.setItem("token",t.payload.token),N(t.payload.token),Object(l.a)(Object(l.a)({},e),{},{token:t.payload.token,user:t.payload.user,isAuthenticated:!0,loading:!1});case p:return localStorage.removeItem("token"),N(),Object(l.a)(Object(l.a)({},e),{},{user:null,token:null,isAuthenticated:!1,loading:!1});default:return e}},Se=function(){return localStorage&&(localStorage.partyPizza||(localStorage.partyPizza=JSON.stringify({pizza:{},topping:{}}))),localStorage.partyPizza?JSON.parse(localStorage.partyPizza):{}},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return{pizza:Object(l.a)({},t.payload.pizza),topping:Object(l.a)({},t.payload.topping)};case z:var n=Object(l.a)({},e.pizza),a=Object(l.a)({},e.topping);for(var c in n)t.payload.pizza.includes(c.toString())||delete n[c];for(var r in a)t.payload.topping.includes(r.toString())||delete a[r];return localStorage.partyPizza=JSON.stringify({pizza:n,topping:a}),Object(l.a)(Object(l.a)({},e),{},{pizza:n,topping:a});default:return e}},we=n(30),Te={data:{topping:[],pizza:[]},selectedPizza:null,selectedTopping:null,loading:!0},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(l.a)(Object(l.a)({},e),{},{data:{pizza:Object(we.a)(t.payload.pizza),topping:Object(we.a)(t.payload.topping)},loading:!1});case v:return Object(l.a)(Object(l.a)({},e),{},{selectedPizza:t.payload});case m:return Object(l.a)(Object(l.a)({},e),{},{selectedTopping:t.payload});default:return e}},Ie=Object(fe.combineReducers)({auth:Ne,cart:Ce,data:Pe}),De=[ke.a],Me=Object(fe.createStore)(Ie,{},Object(ze.composeWithDevTools)(fe.applyMiddleware.apply(void 0,De)));s.a.render(Object(D.jsx)(c.a.StrictMode,{children:Object(D.jsx)(u.a,{children:Object(D.jsx)(h.a,{store:Me,children:Object(D.jsx)(ve,{})})})}),document.getElementById("root")),me()}},[[94,1,2]]]);
//# sourceMappingURL=main.98ad7ec7.chunk.js.map